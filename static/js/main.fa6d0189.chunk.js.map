{"version":3,"sources":["cover.jpeg","theme.js","Border/SidebarItem.js","Border/Sidebar.js","Component/AvatarIcon/AvatarIcon.js","reducers/site.js","constant.js","reducers/user.js","controller/user.js","controller/site.js","controller/utils.js","Border/Topbar.js","Border/Footer.js","Border/Border.js","Component/UserAutocomplete/UserAutocomplete.js","Component/ImgUrlTextField/ImgUrlTextField.js","MainPage/NewMangaButton.js","Component/TagChip/colors.js","Component/TagChip/TagChip.js","MainPage/MangaCard.js","MainPage/MangaCardList.js","MainPage/MainPage.js","Component/MaterialTable/tableIcons.js","TasksPage/TasksTable.js","TasksPage/TasksPage.js","LoginPage/LoginPage.js","MangaPage/NewChapterButton.js","Component/TaskChip/icons.js","Component/TaskChip/TaskChip.js","MangaPage/ChapterStepper/ChapterStepper.js","MangaPage/NewTaskButton.js","MangaPage/ChapterList/EditChapterButton.js","Component/DeleteButton/DeleteButton.js","MangaPage/ChapterList/ChapterListItem.js","MangaPage/ChapterList/ChapterList.js","MangaPage/EditMangaButton.js","Component/UserChip/UserChip.js","MangaPage/Metadata.js","Component/TagChip/AddTagChip.js","MangaPage/ChapterBlock/TaskBlock/EditTaskButton.js","MangaPage/ChapterBlock/TaskBlock/DataRender.js","Component/StatusIcon/StatusIcon.js","MangaPage/ChapterBlock/TaskBlock/TaskInfo.js","MangaPage/ChapterBlock/TaskBlock/TaskBlock.js","MangaPage/ChapterBlock/ChapterInfo.js","MangaPage/ChapterBlock/ChapterBlock.js","MangaPage/MangaPage.js","PrivateRoute.js","DashboardPage/TasksBlock.js","Component/ChangePasswordButton/ChangePasswordButton.js","DashboardPage/SettingsBlock.js","DashboardPage/AdminBlock.js","DashboardPage/DashboardPage.js","Snackbar.js","OAuthPage/OAuthPage.js","CloudPage/CloudPage.js","PeoplePage/UsersTable.js","PeoplePage/PeoplePage.js","MessagePage/MessagePage.js","UserPage/UserPage.js","NotFound.js","LoginPage/SignUpPage.js","Routes.js","serviceWorker.js","reducers/index.js","index.js"],"names":["module","exports","mainThem","createMuiTheme","palette","primary","orange","secondary","deepOrange","responsiveMainThem","responsiveFontSizes","useStyles","makeStyles","theme","popover","pointerEvents","paper","padding","spacing","listItem","breakpoints","up","paddingTop","paddingBottom","SidebarItem","props","name","to","sidebarToggle","React","useState","anchorEl","setAnchorEl","match","useRouteMatch","path","exact","classes","useTheme","isDesktop","useMediaQuery","handlePopoverClose","open","Boolean","ListItem","button","disableGutters","className","onClick","component","Link","selected","Hidden","smDown","Button","onMouseEnter","event","currentTarget","onMouseLeave","children","mdUp","ListItemIcon","style","minWidth","ListItemText","Popover","anchorOrigin","vertical","horizontal","transformOrigin","onClose","disableRestoreFocus","useStyle","drawer","width","flexShrink","placeholder","mixins","toolbar","drawerPaper","Sidebar","openStatus","privilege","useSelector","state","user","height","Box","display","flexDirection","justifyContent","alignItems","Divider","List","disablePadding","fontSize","implementation","Drawer","variant","anchor","ModalProps","keepMounted","backgroundColor","n","red","pink","purple","indigo","blue","cyan","teal","lime","brown","grey","textColor","AvatarIcon","avatar","hashCode","str","i","hash","length","charCodeAt","Avatar","alt","src","color","site","broadcast","snackMsg","message","busy","showCherry","action","type","Object","assign","isBusy","API_BASE","API_USER","API_MANGA","logging","uid","nickname","number_of_notifications","goo_timestamp","number","loginWithToken","dispatch","a","setLogging","setBusy","axios","get","headers","tokenHeader","validateStatus","status","then","res","data","window","localStorage","setItem","catch","err","console","log","finally","getItem","setGoo","time","Date","now","getTimezoneOffset","initSite","setShowCherry","params","key","setBroadcast","response","detail","setSnackbar","e","dismissable","msg","setTitle","title","document","localtime","stamp","getFullYear","getMonth","getDate","localtime_exact","getHours","slice","getMinutes","menuButton","appBar","zIndex","buttonProgress","position","top","left","marginTop","marginLeft","Topbar","useDispatch","number_of_notification","goo","anchorName","setAnchorName","handlePopoverOpen","AppBar","IconButton","aria-label","create_time","s","secs","mins","hrs","dys","ms2string","getTime","timelapse","Badge","badgeContent","overlap","CircularProgress","size","LinearProgress","Footer","ver1","ver2","Typography","align","root","content","flexGrow","mainArea","Border","mobileOpen","setMobileOpen","useEffect","fetchData","handleDrawerToggle","CssBaseline","UserAutocomplete","input","label","initVal","setOpen","loading","setLoading","userList","setUserList","withCredentials","users","Autocomplete","onOpen","loadingText","noOptionsText","options","onChange","value","getOptionLabel","option","defaultValue","renderOption","getOptionSelected","filterOptions","inputValue","matchSorter","keys","renderInput","TextField","required","InputProps","endAdornment","Fragment","ImgUrlTextField","script","createElement","setAttribute","async","head","appendChild","margin","id","fullWidth","target","data-chevereto-pup-trigger","data-target","ariant","NewMangaButton","handleClose","Dialog","aria-labelledby","onSubmit","values","getElementById","put","location","reload","render","handleSubmit","DialogTitle","DialogContent","autoFocus","helperText","DialogActions","tagColor","TagChip","tag","mid","cid","tid","deletable","Chip","onDelete","level","post","maxWidth","labels","right","marginRight","bottom","boxShadow","opacity","details","MangaCard","manga","cover","img","changeImg","Image","onload","Card","CardActionArea","CardMedia","image","flexWrap","tags","map","CardContent","gutterBottom","MangaCardList","showFinished","mangas","setMangas","cherry","titleArea","marginBottom","cardsArea","expand","transform","transition","transitions","create","duration","shortest","expandOpen","MainPage","expanded","setExpanded","setShowFinished","Container","alignSelf","clsx","aria-expanded","Collapse","filterArea","in","timeout","unmountOnExit","FormControlLabel","checked","control","Switch","labelPlacement","Alert","severity","AlertTitle","tableIcons","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","TasksTable","history","useHistory","tasks","icons","columns","field","defaultGroupOrder","lookup","0","1","2","3","4","5","6","task","sorting","grouping","pageSize","components","Toolbar","onRowClick","rowData","togglePanel","push","localization","groupedBy","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","taskListItem","TasksPage","setTasks","main","form","submit","LoginPage","from","useLocation","pathname","preventDefault","stopPropagation","pass","qs","stringify","username","password","replace","auth","autoComplete","NewChapterButton","no1","no2","no4","empty","route","setRoute","handleRouteChange","FormControl","FormLabel","FormGroup","row","Checkbox","disabled","taskIcon","TaskChip","icon","clickable","nominee","completed","ChapterListItem","chapter","Stepper","alternativeLabel","nonLinear","activeStep","orientation","index","Step","StepButton","StepLabel","NewTaskButton","order","initialValues","MenuItem","EditChapterButton","tasksList","setTasksList","ps","multiline","rowsMax","subheader","ListSubheader","DialogContentText","list","setList","animation","DeleteButton","api","callback","others","setInput","delete","rootExpanded","heading","typography","pxToRem","secondaryHeading","text","taskChip","summary","adminAuth","ExpansionPanel","TransitionProps","ExpansionPanelSummary","expandIcon","aria-controls","noWrap","ExpansionPanelDetails","ExpansionPanelActions","ChapterList","setValue","Tabs","newValue","Tab","SubChapterList","listName","chapters","setChapters","query_status","EditMangaButton","producer","UserChip","undefined","Metadata","create_on","last_update","paragraph","AddTagChip","InputLabel","EditTaskButton","DataRender","StatusIcon","TaskBlock","taskState","setTaskState","accept_by","ToggleButtons","ToggleStatusButtons","handleAssign","assign_to","handleStatusClick","setTask","Skeleton","staffItem","ChapterInfo","ChapterBlock","useParams","setChapter","setOrder","MobileStepper","backButton","nextButton","steps","coverCard","MangaPage","setAdminAuth","setManga","RouterLink","Grid","container","item","xs","md","p","PrivateRoute","rest","Tasks","defaultSort","ChangePasswordButton","Settings","setUser","introduction","Admin","codes","setCodes","EditBroadcast","new_codes","code","Paper","onCopy","DashboardPage","removeItem","tabs","TabPanel","other","hidden","Snackbar","useSnackbar","enqueueSnackbar","closeSnackbar","errorMsg","omitAction","messageProps","OAuthPage","fail","setFail","query","URLSearchParams","search","API_THIRD_PARTY","client_id","auth_code","href","CloudPage","UsersTable","PeoplePage","setUsers","userChip","unreadHeading","fontWeight","MessagePage","messages","setMessages","deleteFromList","mrn","result","MessageItem","unread","setUnread","body","setBody","UserPage","NotFound","setTimeout","redirect","SignUpPage","Routes","isLocalhost","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","error","mikanPeel","combineReducers","store","createStore","applyMiddleware","thunk","ReactDOM","ThemeProvider","URL","process","origin","addEventListener","fetch","contentType","indexOf","ready","unregister","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.fa6d0189.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/cover.d753b4ce.jpeg\";","import { createMuiTheme, responsiveFontSizes} from '@material-ui/core/styles';\nimport orange from '@material-ui/core/colors/orange';\nimport deepOrange from \"@material-ui/core/colors/deepOrange\";\n\nconst mainThem = createMuiTheme({\n    palette: {\n        primary: orange,\n        secondary: deepOrange,\n    },\n});\n\nexport const responsiveMainThem = responsiveFontSizes(mainThem);","import React from 'react';\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Hidden, Popover} from \"@material-ui/core\";\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport {useTheme} from \"@material-ui/core/styles\";\nimport {Link, useRouteMatch} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    popover: {\n        pointerEvents: 'none',\n    },\n    paper: {\n        padding: theme.spacing(1),\n    },\n    listItem: {\n        [theme.breakpoints.up(\"md\")]: {\n            paddingTop: 0,\n            paddingBottom: 0\n        },\n    }\n}));\n\n\nexport default function SidebarItem(props) {\n    const {name, to, sidebarToggle} = props;\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const match = useRouteMatch({path: to, exact: to === \"/\"});\n    const classes = useStyles();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n    const handlePopoverOpen = (event) => {\n        setAnchorEl(event.currentTarget);\n    };\n\n    const handlePopoverClose = () => {\n        setAnchorEl(null);\n    };\n\n    const open = Boolean(anchorEl);\n\n    return (<div>\n            <ListItem button disableGutters={isDesktop} className={classes.listItem}\n                      onClick={isDesktop? null: sidebarToggle}\n                      component={Link} to={to}\n                      selected={match !== null}>\n                <Hidden smDown>\n                    <Button onMouseEnter={handlePopoverOpen}\n                            onMouseLeave={handlePopoverClose}>{props.children}</Button>\n                </Hidden>\n                <Hidden mdUp>\n                    <ListItemIcon style={{minWidth: \"40px\"}}>{props.children}</ListItemIcon>\n                    <ListItemText primary={name}/>\n                </Hidden>\n            </ListItem>\n            <Popover\n                className={classes.popover}\n                classes={{\n                    paper: classes.paper,\n                }}\n                open={open}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'center',\n                    horizontal: 'right',\n                }}\n                transformOrigin={{\n                    vertical: 'center',\n                    horizontal: 'left',\n                }}\n                onClose={handlePopoverClose}\n                disableRestoreFocus\n            >\n                {name}\n            </Popover>\n        </div>\n\n\n    );\n}","import React from \"react\";\nimport Hidden from \"@material-ui/core/Hidden\";\nimport Drawer from \"@material-ui/core/Drawer\";\nimport Divider from \"@material-ui/core/Divider\";\nimport List from \"@material-ui/core/List\";\nimport SidebarItem from \"./SidebarItem\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\nimport {Box} from \"@material-ui/core\";\n\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\nimport DateRangeIcon from '@material-ui/icons/DateRange';\nimport FolderSharedIcon from '@material-ui/icons/FolderShared';\nimport PeopleIcon from '@material-ui/icons/People';\nimport EqualizerIcon from '@material-ui/icons/Equalizer';\nimport ExtensionIcon from '@material-ui/icons/Extension';\nimport {useSelector} from \"react-redux\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\n\nexport const desktopWidth = 80;\nconst mobileWidth = 150;\n\nconst useStyle = makeStyles((theme) => ({\n    drawer: {\n        [theme.breakpoints.up('md')]: {\n            width: desktopWidth,\n            flexShrink: 0,\n        },\n    },\n    placeholder: theme.mixins.toolbar,\n    drawerPaper: {\n        [theme.breakpoints.up('md')]: {\n            width: desktopWidth,\n        },\n        width: mobileWidth,\n    }\n}));\n\nexport default function Sidebar(props) {\n    const {sidebarToggle, openStatus} = props;\n    const classes = useStyle();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n\n    const privilege = useSelector(state => state.user.privilege);\n\n    const drawer = (\n        <span style={{height: \"100%\"}}>\n            <Box style={{height: \"100%\"}} display=\"flex\" flexDirection={\"column\"}\n                 justifyContent={\"space-between\"} alignItems={\"stretch\"}>\n                <Box>\n                    <div className={classes.placeholder}/>\n                    <Divider/>\n\n                    <List disablePadding={true}>\n                        <SidebarItem to={\"/\"} name={\"漫画\"} sidebarToggle={sidebarToggle}>\n                            <MenuBookIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/tasks\"} name={\"任务\"} sidebarToggle={sidebarToggle}>\n                            <DateRangeIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/cloud\"} name={\"文件\"} sidebarToggle={sidebarToggle}>\n                            <FolderSharedIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        <SidebarItem to={\"/users\"} name={\"成员\"} sidebarToggle={sidebarToggle}>\n                            <PeopleIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                        {privilege > 99 &&\n                        <SidebarItem to={\"/stat\"} name={\"统计\"} sidebarToggle={sidebarToggle}>\n                            <EqualizerIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>}\n                    </List>\n                </Box>\n                {privilege > 99 &&\n                <Box>\n                    <Divider/>\n                    <List>\n                        <SidebarItem name={\"管理\"} sidebarToggle={sidebarToggle}>\n                            <ExtensionIcon style={isDesktop ? {fontSize: 62} : {}}/>\n                        </SidebarItem>\n                    </List>\n                </Box>\n                }\n            </Box>\n        </span>\n\n    );\n\n    return (<nav className={classes.drawer}>\n        <Hidden mdUp implementation=\"css\">\n            <Drawer\n                variant=\"temporary\"\n                anchor=\"left\"\n                open={openStatus}\n                onClose={sidebarToggle}\n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n                ModalProps={{\n                    keepMounted: true,\n                }}\n            >\n                {drawer}\n            </Drawer>\n        </Hidden>\n        <Hidden smDown implementation=\"css\">\n            <Drawer\n                classes={{\n                    paper: classes.drawerPaper,\n                }}\n                variant=\"permanent\"\n                open\n            >\n                {drawer}\n            </Drawer>\n        </Hidden>\n    </nav>);\n}","import React from \"react\";\nimport Avatar from \"@material-ui/core/Avatar\";\nimport red from \"@material-ui/core/colors/red\";\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport blue from \"@material-ui/core/colors/blue\";\nimport cyan from \"@material-ui/core/colors/cyan\";\nimport teal from \"@material-ui/core/colors/teal\";\nimport lime from \"@material-ui/core/colors/lime\";\nimport orange from \"@material-ui/core/colors/orange\";\nimport brown from \"@material-ui/core/colors/brown\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nfunction backgroundColor(n) {\n    switch (n) {\n        case 0:\n            return red[500];\n        case 1:\n            return pink[300];\n        case 2:\n            return purple[500];\n        case 3:\n            return indigo[900];\n        case 4:\n            return blue[500];\n        case 5:\n            return cyan[500];\n        case 6:\n            return teal[500];\n        case 7:\n            return lime[600];\n        case 8:\n            return orange[500];\n        case 9:\n            return brown[500];\n        case 10:\n            return grey[500];\n        default:\n            return grey[200];\n    }\n}\n\nfunction textColor(n) {\n    switch (n) {\n        case 0:\n            return \"white\";\n        case 1:\n            return \"white\";\n        case 2:\n            return \"white\";\n        case 3:\n            return \"white\";\n        case 4:\n            return \"white\";\n        case 5:\n            return \"black\";\n        case 6:\n            return \"white\";\n        case 7:\n            return \"black\";\n        case 8:\n            return \"black\";\n        case 9:\n            return \"white\";\n        case 10:\n            return \"black\";\n        default:\n            return \"black\";\n    }\n}\n\nexport default function AvatarIcon(props) {\n    const {avatar, name} = props;\n\n    const hashCode = (str) => {\n        let hash = 0, i, chr;\n        for (i = 0; i < str.length; i++) {\n            chr   = str.charCodeAt(i);\n            hash  = ((hash << 5) - hash) + chr;\n            hash |= 0; // Convert to 32bit integer\n        }\n        return hash;\n    };\n\n    return (\n        <Avatar alt={name} src={avatar} {...props}\n        style={{color: textColor(hashCode(name) % 11),\n        backgroundColor: backgroundColor(hashCode(name) % 11)}}>{name[0] ? name[0] : \"柑\"}</Avatar>\n    );\n}","export const SET_BROADCAST = 'SET_BROADCAST';\nexport const SET_SNACK_MSG = 'SET_SNACK_MSG';\nexport const SET_BUSY = 'SET_BUSY';\nexport const SET_SHOW_CHERRY = 'SET_SHOW_CHERRY';\n\nconst site = (state = {broadcast : \"\", snackMsg : {message: \"\"}, busy : 0, showCherry : true}, action) => {\n    switch (action.type) {\n        case 'SET_BROADCAST':\n            return Object.assign({}, state, {\n                broadcast: action.broadcast,\n            });\n        case 'SET_SNACK_MSG':\n            return Object.assign({}, state, {\n                snackMsg: action.snackMsg,\n            });\n        case 'SET_BUSY':\n            return Object.assign({}, state, {\n                busy: state.busy + (action.isBusy ? 1 : -1),\n            });\n        case 'SET_SHOW_CHERRY':\n            return Object.assign({}, state, {\n                showCherry: action.showCherry,\n            });\n        default:\n            return state\n    }\n};\n\nexport default site;","export const API_BASE = \"https://api.mikan.mom\";\nexport const CLOUD_URL = \"https://pan.mikan.mom\";\n\nexport const API_THIRD_PARTY = API_BASE + '/third_party';\nexport const API_USER = API_BASE + \"/user\";\nexport const API_TAG = API_BASE + \"/tag\";\nexport const API_TAG_DELETE = API_BASE + \"/tag_delete\";\nexport const API_MANGA = API_BASE + \"/manga\";\nexport const API_TASK = API_BASE + \"/task\";\n\n\nexport function api_chapter(cid, listName = undefined) {\n    return API_MANGA + \"/\" + cid + (listName? \"/\" + listName : \"\");\n}","export const FILL_USER = 'FILL_USER';\nexport const CLEAN_USER = 'CLEAN_USER';\nexport const SET_LOGGING = 'SET_LOGGING';\nexport const SET_NOTIFICATIONS = 'SET_NOTIFICATIONS';\nexport const SET_GOO = 'SET_GOO';\n\nconst user = (state = {privilege: 0, logging: true}, action) => {\n    switch (action.type) {\n        case 'FILL_USER':\n            return {\n                uid: action.uid,\n                nickname: action.nickname,\n                avatar: action.avatar,\n                privilege: action.privilege,\n                number_of_notifications: action.number_of_notifications,\n                goo_timestamp: action.goo_timestamp\n            };\n        case 'CLEAN_USER':\n            return {\n                privilege: 0\n            };\n        case 'SET_LOGGING':\n            return Object.assign({}, state, {\n                logging: action.logging\n            });\n        case 'SET_NOTIFICATIONS':\n            return Object.assign({}, state, {\n                number_of_notifications: state.number_of_notifications + action.number\n            });\n        case 'SET_GOO':\n            return Object.assign({}, state, {\n                goo_timestamp: action.goo_timestamp\n            });\n        default:\n            return state\n    }\n};\n\nexport default user;","import axios from \"axios\";\nimport qs from 'qs';\nimport {FILL_USER, SET_GOO, SET_LOGGING, SET_NOTIFICATIONS} from \"../reducers/user\";\nimport {setBusy, setSnackbar} from \"./site\";\nimport {API_BASE} from \"../constant\";\n\nexport function auth(id, pass, history, from) {\n    return dispatch => {\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/token\", qs.stringify({\n                username: id,\n                password: pass\n            }), {\n                headers: tokenHeader(),\n                validateStatus: status => status === 200\n            }\n        ).then(res => res.data)\n            .then(res => {\n                    window.localStorage.setItem(\"access_token\", res[\"access_token\"]);\n                    dispatch(loginWithToken());\n                    history.replace(from);\n                }\n            ).catch((err) => {\n                try {\n                    console.log(err.response.data.detail);\n                    dispatch(setSnackbar(err.response.data.detail, \"error\"));\n                } catch (e) {\n                    dispatch(setSnackbar(\"未知的错误\", \"error\"));\n                }\n            }).finally(() => dispatch(setBusy(false)));\n    };\n}\n\n\nexport function loginWithToken() {\n    return async dispatch => {\n        dispatch(setLogging(true));\n        dispatch(setBusy(true));\n        await axios.get(API_BASE + \"/profile\", {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(Object.assign({type: FILL_USER}, res));\n            // dispatch(setSnackbar(\"登录成功\", \"success\"));\n            refreshToken()\n        }).catch(err => {\n            console.log(\"未登录\");\n        }).finally(() => {\n            dispatch(setBusy(false));\n            dispatch(setLogging(false));\n        });\n    };\n}\n\nfunction refreshToken() {\n    axios.get(API_BASE + \"/refresh_token\", {\n        headers: tokenHeader(),\n        validateStatus: status => status === 200\n    }).then(res => res.data).then(res => {\n        window.localStorage.setItem(\"access_token\", res[\"access_token\"]);\n    });\n}\n\n\nexport function tokenHeader() {\n    let token = window.localStorage.getItem(\"access_token\");\n    return {'Authorization': 'Bearer ' + token};\n}\n\n\nexport function setLogging(logging) {\n    return dispatch => {\n        dispatch({\n            type: SET_LOGGING,\n            logging: logging\n        })\n    }\n}\n\nexport function setNotifications(number) {\n    return dispatch => {\n        dispatch(Object.assign({type: SET_NOTIFICATIONS}, {number: number}));\n    };\n}\n\nexport function setGoo() {\n    let time = new Date();\n    return dispatch => {\n        dispatch(Object.assign({type: SET_GOO}, {goo_timestamp: (Date.now() - time.getTimezoneOffset() * 60000) / 1000}));\n    };\n}","import {SET_SNACK_MSG, SET_SHOW_CHERRY, SET_BUSY, SET_BROADCAST} from \"../reducers/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"./user\";\n\nexport function initSite() {\n    return dispatch => {\n        if (window.localStorage.getItem(\"noCherry\") === \"1\") {\n            dispatch(setShowCherry(false));\n        }\n        axios.get(API_BASE + \"/env\", {\n                params: {\n                    key: \"broadcast\"\n                },\n                headers: tokenHeader(),\n                validateStatus: status => status === 200\n            }\n        ).then(res => res.data)\n            .then(res => {\n                    dispatch(setBroadcast(res[\"result\"]));\n                }\n            ).catch((err) => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"无法拉取站点，未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    }\n}\n\nexport function setSnackbar(message, variant = \"info\", dismissable = true) {\n    return dispatch =>\n    dispatch(Object.assign({type: SET_SNACK_MSG}, {snackMsg:\n            {\n                message: message,\n                variant: variant,\n                dismissable: dismissable\n            }}));\n}\n\nexport function setBusy(isBusy) {\n    return dispatch => {\n        dispatch(Object.assign({type: SET_BUSY}, {isBusy: isBusy}));\n    };\n}\n\nexport function setShowCherry(showCherry) {\n    window.localStorage.setItem(\"noCherry\", showCherry ? \"0\" : \"1\");\n    return dispatch =>\n        dispatch(Object.assign({type: SET_SHOW_CHERRY}, {showCherry: showCherry}));\n}\n\nexport function setBroadcast(msg) {\n    return dispatch => dispatch(Object.assign({type: SET_BROADCAST}, {broadcast: msg}));\n}","export function setTitle(title) {\n    if (typeof title === \"string\")\n        if (title !== \"\")\n            document.title = title + \"-汉化工房九九组\";\n        else\n            document.title = \"汉化工房九九组\"\n}\n\nexport function timelapse(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var create_time = new Date(stamp * 1000);\n    let create_time = new Date();\n    stamp += create_time.getTimezoneOffset() * 60;\n    create_time = new Date(stamp * 1000);\n    var current_time = new Date().getTime();\n    var lapse =  current_time - create_time;\n    function ms2string(s) {\n        var ms = s % 1000;\n        s = (s - ms) / 1000;\n        var secs = s % 60;\n        s = (s - secs) / 60;\n        var mins = s % 60;\n        s = (s - mins) / 60;\n        var hrs = s % 24;\n        var dys = (s - hrs) / 24;\n        return (dys !== 0?(dys+'天'):\"\") + (hrs !== 0 || dys !== 0?((\"0\"+hrs).slice(-2)+'小时'):\"\") +\n            (mins !== 0 || hrs !== 0 || dys !== 0 ?((\"0\"+mins).slice(-2)+'分钟'):\"\") + (\"0\"+secs).slice(-2) +'秒';\n    }\n    return ms2string(lapse);\n}\n\n\nexport function localtime(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var time = new Date(stamp * 1000);\n    let time = new Date();\n    stamp += time.getTimezoneOffset() * 60;\n    time = new Date(stamp * 1000);\n    return time.getFullYear() + \"年\" + (time.getMonth()+1) + \"月\" + time.getDate() + \"日\";\n}\n\nexport function localtime_exact(stamp) {\n    if (typeof stamp !== \"number\") return \"\";\n    // var time = new Date(stamp * 1000);\n    let time = new Date();\n    stamp += time.getTimezoneOffset() * 60;\n    time = new Date(stamp * 1000);\n    return time.getFullYear() + \"年\" + (time.getMonth()+1) + \"月\" + time.getDate() + \"日 \" +\n        (\"0\"+time.getHours()).slice(-2) + \":\" + (\"0\"+time.getMinutes()).slice(-2);\n}","import React from \"react\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Box from \"@material-ui/core/Box\";\n\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport {Badge, Popover} from \"@material-ui/core\";\nimport {Link} from \"react-router-dom\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport AvatarIcon from \"../Component/AvatarIcon/AvatarIcon\";\nimport {Duck} from \"mdi-material-ui\";\nimport {setSnackbar} from \"../controller/site\";\nimport {timelapse} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    menuButton: {\n        [theme.breakpoints.up('md')]: {\n            display: 'none',\n        },\n        padding: 0,\n    },\n    appBar: {\n        zIndex: theme.zIndex.drawer + 1,\n    },\n    popover: {\n        pointerEvents: 'none',\n    },\n    buttonProgress: {\n        position: 'absolute',\n        top: '50%',\n        left: '50%',\n        marginTop: -12,\n        marginLeft: -12,\n    },\n}));\n\nexport default function Topbar(props) {\n    const {sidebarToggle} = props;\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    const privilege = useSelector(state => state.user.privilege);\n    const isBusy = useSelector(state => state.site.busy);\n    const logging = useSelector(state => state.user.logging);\n    const number_of_notification = useSelector(state => state.user.number_of_notifications);\n    const nickname = useSelector(state => state.user.nickname);\n    const avatar = useSelector(state => state.user.avatar);\n    const goo = useSelector(state => state.user.goo_timestamp);\n\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [anchorName, setAnchorName] = React.useState(\"\");\n\n    const handlePopoverOpen = (event, name) => {\n        setAnchorName(name);\n        setAnchorEl(event.currentTarget);\n\n    };\n\n    const handlePopoverClose = () => {\n        setAnchorEl(null);\n    };\n\n    const handleGoo = () => {\n        dispatch(setSnackbar(timelapse(goo), \"info\"));\n    };\n\n    const open = Boolean(anchorEl);\n\n    return (<AppBar position=\"fixed\" className={classes.appBar}>\n        <Toolbar>\n            <div style={{width: \"100%\"}}>\n                <Box display=\"flex\"\n                     justifyContent={\"space-between\"} alignItems={\"center\"}>\n                    <Box>\n                        <IconButton\n                            onClick={sidebarToggle}\n                            className={classes.menuButton}\n                        >\n                            <MenuIcon/>\n                        </IconButton>\n                    </Box>\n                    <Box>\n                        {privilege > 0 && (<IconButton onMouseEnter={(e) => handlePopoverOpen(e, \"咕~\")}\n                                                       onMouseLeave={handlePopoverClose} aria-label={\"goo\"} onClick={handleGoo}>\n                            <Duck fontSize=\"large\"/>\n                        </IconButton>)}\n                        {privilege > 0 && (<IconButton onMouseEnter={(e) => handlePopoverOpen(e, \"通知\")}\n                                    onMouseLeave={handlePopoverClose} aria-label={\"notification\"} component={Link} to={\"/message\"}>\n                            <Badge badgeContent={number_of_notification} overlap={\"circle\"} color={\"secondary\"}>\n                                <NotificationsIcon fontSize={\"large\"}/>\n                            </Badge>\n                        </IconButton>)}\n                        <IconButton onMouseEnter={(e) => handlePopoverOpen(e, nickname || \"登录\")}\n                                    onMouseLeave={handlePopoverClose} aria-label={\"account\"}\n                                    component={Link} to={\"/me\"}>\n                            {nickname ? <AvatarIcon name={nickname} avatar={avatar}/> : <AccountCircleIcon fontSize={\"large\"}/>}\n                            {logging && <CircularProgress size={24} className={classes.buttonProgress}/>}\n                        </IconButton>\n\n                    </Box>\n                </Box>\n            </div>\n        </Toolbar>\n        {isBusy > 0 ? <LinearProgress/> : <></>}\n        <Popover\n            className={classes.popover}\n            classes={{\n                paper: classes.paper,\n            }}\n            open={open}\n            anchorEl={anchorEl}\n            anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n            }}\n            transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n            }}\n            onClose={handlePopoverClose}\n            disableRestoreFocus\n        >\n            {anchorName}\n        </Popover>\n    </AppBar>);\n}","import Typography from \"@material-ui/core/Typography\";\nimport React from \"react\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {Divider} from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n    placeholder: {\n        height: theme.spacing(4)\n    }\n}));\nexport default function Footer(props) {\n    const {ver1, ver2} = props;\n    const classes = useStyles();\n    return (\n        <div>\n            <div className={classes.placeholder}/>\n            <Divider />\n            <Typography variant=\"body2\" color=\"textSecondary\" align=\"center\">\n                Mikan v{ver1}, Mikan-Peel v{ver2}\n            </Typography>\n        </div>\n    );\n}","import React from 'react';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Sidebar from \"./Sidebar\";\nimport Topbar from \"./Topbar\";\nimport Footer from \"./Footer\";\nimport {desktopWidth} from \"./Sidebar\";\n\nimport { useDispatch } from \"react-redux\";\nimport {loginWithToken} from \"../controller/user\";\nimport {initSite} from \"../controller/site\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        display: 'flex',\n        alignItems: 'stretch',\n    },\n    placeholder: theme.mixins.toolbar,\n    content: {\n        flexGrow: 1,\n    },\n    mainArea: {\n        minWidth: 600,\n        width: 600,\n        [theme.breakpoints.up(\"md\")]: {\n            width: 960\n        },\n        [theme.breakpoints.up(\"lg\")]: {\n            width: `calc(1280px - ${desktopWidth}px)`\n        },\n        [theme.breakpoints.up(\"xl\")]: {\n            width: `calc(1920px - ${desktopWidth}px)`\n        }\n    }\n}));\n\nfunction Border(props) {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const [mobileOpen, setMobileOpen] = React.useState(false);\n\n    React.useEffect( () => {\n        async function fetchData() {\n            dispatch(initSite());\n            await dispatch(loginWithToken());\n        }\n        fetchData();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleDrawerToggle = () => {\n        setMobileOpen(!mobileOpen);\n    };\n\n    return (\n        <div className={classes.root}>\n            <CssBaseline/>\n            <Topbar sidebarToggle={handleDrawerToggle}/>\n            <Sidebar sidebarToggle={handleDrawerToggle} openStatus={mobileOpen}/>\n            <main className={classes.content}>\n                <div className={classes.placeholder}/>\n\n                        {props.children}\n\n                <Footer ver1={\"2.1b\"} ver2={\"0.2\"}/>\n            </main>\n\n        </div>\n    );\n}\n\nexport default Border;\n","import React from \"react\";\nimport Autocomplete from \"@material-ui/lab/Autocomplete\";\nimport TextField from \"@material-ui/core/TextField\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport axios from \"axios\";\nimport {API_USER} from \"../../constant\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport matchSorter from \"match-sorter\";\n\nexport default function UserAutocomplete(props) {\n    const {input, label, initVal} = props;\n    const [open, setOpen] = React.useState(false);\n    const [loading, setLoading] = React.useState(false);\n    const [userList, setUserList] = React.useState([]);\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        if (open && !loading && userList.length === 0) {\n            setLoading(true);\n            axios.get(API_USER, {\n                withCredentials: true,\n                validateStatus: status => status === 200\n            })\n                .then(res => res.data)\n                .then(res => {\n                        typeof res.users === \"object\" && setUserList(res.users);\n                    }\n                ).catch(err => {\n                dispatch(setSnackbar(\"拉取用户列表失败，请重试\", \"error\"));\n            }).finally(() => setLoading(false));\n        }\n    }, [open]);\n\n    return (\n        <Autocomplete open={open} onOpen={() => setOpen(true)} onClose={() => setOpen(false)}\n                      loading={loading} loadingText=\"加载中...\" noOptionsText=\"没有这个人\" options={userList}\n                      {...props} onChange={((event, value) => input.onChange(value ? value.uid : null))}\n                      getOptionLabel={(option) => option.uid} defaultValue={initVal}\n                      renderOption={(option) => option.nickname + \"@\" + option.uid}\n                      getOptionSelected={(option, value) => option.uid === value.uid}\n                      filterOptions={(options, { inputValue }) =>\n                          matchSorter(options, inputValue, {keys: [\"nickname\", \"uid\"]})}\n                      renderInput={(params) => (\n                          <TextField required\n                              {...params}\n                              label={label}\n                              InputProps={{\n                                  ...params.InputProps,\n                                  endAdornment: (\n                                      <React.Fragment>\n                                          {loading ? <CircularProgress size={20}/> : null}\n                                          {params.InputProps.endAdornment}\n                                      </React.Fragment>\n                                  ),\n                              }}\n                          />\n                      )}/>\n    );\n}","import React from \"react\";\nimport Box from \"@material-ui/core/Box\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\n\n\nexport default function ImgUrlTextField(props) {\n    const {input, initVal} = props;\n\n    React.useEffect(() => {\n        const script = document.createElement(\"script\");\n        script.src = \"https://imgchr.com/sdk/pup.js\";\n        script.setAttribute(\"data-url\", \"https://imgchr.com/upload\");\n        script.setAttribute(\"data-auto-insert\", \"direct-links\");\n        script.setAttribute(\"data-mode\", \"manual\");\n        script.async = true;\n        document.head.appendChild(script);\n    }, []);\n\n    return (\n        <Box display=\"flex\" alignItems=\"flex-end\">\n            <Box flexGrow={1}>\n                <TextField\n                    margin=\"dense\" id=\"cover\" name=\"cover\" label=\"封面URL\" type=\"string\" fullWidth defaultValue={initVal}\n                    onChange={(event) => input.onChange(event.target.value)}\n                />\n            </Box>\n            <Box>\n                <Button data-chevereto-pup-trigger data-target=\"#cover\"\n                        ariant=\"contained\" color=\"secondary\" component=\"span\">图床上传</Button>\n            </Box>\n        </Box>\n    );\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport UserAutocomplete from \"../Component/UserAutocomplete/UserAutocomplete\";\n\nimport {Form, Field} from 'react-final-form';\nimport {TextField, Checkboxes} from 'mui-rff';\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {useDispatch} from \"react-redux\";\nimport {setSnackbar} from \"../controller/site\";\n\n\nexport default function NewMangaButton() {\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"cover\"] = document.getElementById(\"cover\").value;\n        values[\"cherry\"] = values[\"cherry\"] === true;\n        values[\"ps\"] = \"\";\n        console.log(values);\n        axios.put(API_MANGA, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant={\"contained\"} color={\"primary\"} onClick={handleClickOpen}>创建漫画</Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogTitle id=\"form-dialog-title\">创建漫画</DialogTitle>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"漫画名称\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"漫画ID\" type=\"string\" fullWidth required helperText=\"漫画ID会出现在URL上，不可重名，最好避免使用汉字。建议：罗马字/英文简写。\"/>\n                            <Checkboxes\n                                name=\"cherry\"\n                                data={{label: \"夏蜜樱桃\", value: \"cherry\"}}\n                            />\n                            <Field component={ UserAutocomplete } name=\"producer\" label=\"制作人\" id=\"producer\"/>\n                            <Field component={ImgUrlTextField} name=\"cover\"/>\n\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                创建\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n    );\n}\n","import red from '@material-ui/core/colors/red';\nimport pink from \"@material-ui/core/colors/pink\";\nimport purple from \"@material-ui/core/colors/purple\";\nimport indigo from \"@material-ui/core/colors/indigo\";\nimport blue from '@material-ui/core/colors/blue';\nimport cyan from \"@material-ui/core/colors/cyan\";\nimport teal from \"@material-ui/core/colors/teal\";\nimport lime from \"@material-ui/core/colors/lime\";\nimport orange from \"@material-ui/core/colors/orange\";\nimport brown from \"@material-ui/core/colors/brown\";\nimport grey from \"@material-ui/core/colors/grey\";\n\nexport function tagColor(n) {\n    switch (n) {\n        case \"red\":\n            return red[500];\n        case \"pink\":\n            return pink[300];\n        case \"purple\":\n            return purple[500];\n        case \"indigo\":\n            return indigo[900];\n        case \"blue\":\n            return blue[500];\n        case \"cyan\":\n            return cyan[500];\n        case \"teal\":\n            return teal[500];\n        case \"lime\":\n            return lime[600];\n        case \"orange\":\n            return orange[500];\n        case \"brown\":\n            return brown[500];\n        case \"grey\":\n            return grey[500];\n        default:\n            return grey[200];\n    }\n}\n\nexport function textColor(n) {\n    switch (n) {\n        case \"red\":\n            return \"white\";\n        case \"pink\":\n            return \"white\";\n        case \"purple\":\n            return \"white\";\n        case \"indigo\":\n            return \"white\";\n        case \"blue\":\n            return \"white\";\n        case \"cyan\":\n            return \"black\";\n        case \"teal\":\n            return \"white\";\n        case \"lime\":\n            return \"black\";\n        case \"orange\":\n            return \"black\";\n        case \"brown\":\n            return \"white\";\n        case \"grey\":\n            return \"black\";\n        default:\n            return \"black\";\n    }\n}","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {tagColor, textColor} from \"./colors\";\nimport axios from \"axios\";\nimport {API_TAG_DELETE} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function TagChip(props) {\n    const {tag, mid, cid, tid, deletable} = props;\n    const dispatch = useDispatch();\n\n    const handleDelete = () => {\n        let level = 2;\n        if (typeof tid !== \"string\") level = 1;\n        if (typeof cid !== \"string\") level = 0;\n        axios.post(API_TAG_DELETE, {name: tag.name, color: tag.color,\n            mid: mid, cid: level > 0 ? cid : \"\", tid: level > 1 ? tid : \"\", level: level}, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => window.location.reload()).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <Chip style={{\n            backgroundColor: tagColor(tag.color),\n            color: textColor(tag.color)\n        }} label={tag.name} onDelete={deletable === \"true\" ? handleDelete : null} {...props}/>\n    );\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Typography from '@material-ui/core/Typography';\nimport cover from '../cover.jpeg';\nimport Box from \"@material-ui/core/Box\";\nimport {Link} from \"react-router-dom\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport TagChip from \"../Component/TagChip/TagChip\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        maxWidth: 175,\n        [theme.breakpoints.up(\"md\")]: {\n            maxWidth: 275,\n        },\n        position: \"relative\",\n        margin: theme.spacing(2)\n    },\n    labels: {\n        position: \"absolute\",\n        right: theme.spacing(0),\n        top: theme.spacing(0)\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    },\n    content: {\n        width: \"100%\",\n        position: \"absolute\",\n        bottom: 0,\n        backgroundColor: \"black\",\n        boxShadow: \"20px -20px 20px black, -20px -20px 20px black\",\n        opacity: 0.8\n    },\n    details: {\n        opacity: 1,\n        color: \"white\"\n    }\n}));\n\nexport default function MangaCard(props) {\n    const classes = useStyles();\n    const {manga} = props;\n    const [img, changeImg] = useState(cover);\n\n    React.useEffect(() => {\n        const img = new Image();\n        img.src = manga.cover;\n        img.onload = function () {\n            changeImg(manga.cover);\n        }\n    }, []);\n\n    return (\n        <Card className={classes.root}\n              component={Link} to={\"/manga/\" + manga.id}>\n            <CardActionArea>\n                <CardMedia\n                    component={\"img\"}\n                    image={img}\n                    title={manga.name}\n                />\n                <Box display={\"flex\"} flexDirection={\"row-reverse\"} flexWrap=\"wrap\" className={classes.labels}>\n                    {typeof manga.tags === \"object\" && manga.tags.map((tag, key) =>\n                        (<TagChip className={classes.label} tag={tag} size=\"small\" key={key}/>))}\n                </Box>\n                <CardContent className={classes.content}>\n                    <div className={classes.details}>\n                        <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                            {manga.name || <CircularProgress/>}\n                        </Typography>\n                    </div>\n                </CardContent>\n            </CardActionArea>\n        </Card>\n    );\n}\n","import React, {useState} from \"react\";\nimport Box from \"@material-ui/core/Box\";\n\nimport MangaCard from \"./MangaCard\";\nimport axios from \"axios\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {API_MANGA} from \"../constant\";\nimport {useDispatch, useSelector} from \"react-redux\";\n\nexport default function MangaCardList(props) {\n    const {showFinished} = props;\n    const [mangas, setMangas] = useState([]);\n    const showCherry = useSelector(state => state.site.showCherry);\n    const dispatch = useDispatch();\n\n    React.useEffect(  () => {\n        dispatch(setBusy(true));\n         axios.get(API_MANGA, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                typeof res.mangas === \"object\" && setMangas(res.mangas);\n                }\n            ).catch(err => {\n                dispatch(setSnackbar(\"获取漫画列表失败\", \"error\"));\n            }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    return (\n            <Box display={\"flex\"} flexWrap={\"wrap\"}\n                 justifyContent={\"center\"} alignItems={\"center\"}>\n                {mangas.map((manga) => {\n                    if ((!manga.cherry || showCherry) && (manga.status === 0 || showFinished))\n                        return (<MangaCard manga={manga} key={manga.id}/>);\n                })}\n            </Box>\n    );\n}","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\"\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport Switch from \"@material-ui/core/Switch\";\nimport clsx from \"clsx\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport AlertTitle from \"@material-ui/lab/AlertTitle\";\nimport NewMangaButton from \"./NewMangaButton\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport MangaCardList from \"./MangaCardList\";\nimport {setShowCherry} from \"../controller/site\";\nimport {setTitle} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    cardsArea: {\n        margin: theme.spacing(5)\n    },\n    expand: {\n        transform: 'rotate(0deg)',\n        marginLeft: 'auto',\n        transition: theme.transitions.create('transform', {\n            duration: theme.transitions.duration.shortest,\n        }),\n    },\n    expandOpen: {\n        transform: 'rotate(180deg)',\n    },\n}));\n\nexport default function MainPage(props) {\n    const classes = useStyles();\n    const privilege = useSelector(state => state.user.privilege);\n    const [expanded, setExpanded] = React.useState(false);\n    const [showFinished, setShowFinished] = React.useState(false);\n    const showCherry = useSelector(state => state.site.showCherry);\n    const broadcast = useSelector(state => state.site.broadcast);\n    const dispatch = useDispatch();\n\n    useEffect(() => setTitle(\"\"), []);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    const onChangeCherry = (event) => {\n        dispatch(setShowCherry(event.target.checked));\n    };\n\n    const onChangeFinish = (event) => {\n        setShowFinished(event.target.checked);\n    };\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">汉化工房</Typography>\n                    <Typography variant=\"h2\">九九组</Typography>\n                </Box>\n                <Box alignSelf={\"flex-end\"}>\n                    <IconButton\n                        className={clsx(classes.expand, {\n                            [classes.expandOpen]: expanded,\n                        })}\n                        onClick={handleExpandClick}\n                        aria-expanded={expanded}\n                        aria-label=\"更多选项\"\n                    >\n                        <ExpandMoreIcon/>\n                    </IconButton>\n                </Box>\n            </Box>\n\n            <Collapse className={classes.filterArea} in={expanded} timeout=\"auto\" unmountOnExit>\n\n                <Box flexGrow={1}>\n                </Box>\n                <Box display={\"flex\"} justifyContent=\"flex-end\">\n                    {privilege >= 2 && <NewMangaButton/>}\n                    <FormControlLabel\n                        checked={showCherry}\n                        onChange={onChangeCherry}\n                        value={showCherry}\n                        size={\"small\"}\n                        control={<Switch color=\"primary\"/>}\n                        label=\"显示夏蜜樱桃的作品\"\n                        labelPlacement=\"start\"/>\n                    <FormControlLabel\n                        checked={showFinished}\n                        onChange={onChangeFinish}\n                        value={showCherry}\n                        size={\"small\"}\n                        control={<Switch color=\"primary\"/>}\n                        label=\"显示不再更新的作品\"\n                        labelPlacement=\"start\"/>\n                </Box>\n            </Collapse>\n            {broadcast !== \"\" && \n            <Alert variant=\"outlined\" severity=\"info\">\n                <AlertTitle>公告</AlertTitle>\n                {broadcast}\n            </Alert>}\n            <MangaCardList showFinished={showFinished}/>\n        </Container>\n    );\n}","import React, {forwardRef} from \"react\";\nimport AddBox from \"@material-ui/icons/AddBox\";\nimport Check from \"@material-ui/icons/Check\";\nimport Clear from \"@material-ui/icons/Clear\";\nimport DeleteOutline from \"@material-ui/icons/DeleteOutline\";\nimport ChevronRight from \"@material-ui/icons/ChevronRight\";\nimport Edit from \"@material-ui/icons/Edit\";\nimport SaveAlt from \"@material-ui/icons/SaveAlt\";\nimport FilterList from \"@material-ui/icons/FilterList\";\nimport FirstPage from \"@material-ui/icons/FirstPage\";\nimport LastPage from \"@material-ui/icons/LastPage\";\nimport ChevronLeft from \"@material-ui/icons/ChevronLeft\";\nimport Search from \"@material-ui/icons/Search\";\nimport ArrowUpward from \"@material-ui/icons/ArrowUpward\";\nimport Remove from \"@material-ui/icons/Remove\";\nimport ViewColumn from \"@material-ui/icons/ViewColumn\";\n\nexport const tableIcons = {\n    Add: forwardRef((props, ref) => <AddBox {...props} ref={ref}/>),\n    Check: forwardRef((props, ref) => <Check {...props} ref={ref}/>),\n    Clear: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Delete: forwardRef((props, ref) => <DeleteOutline {...props} ref={ref}/>),\n    DetailPanel: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    Edit: forwardRef((props, ref) => <Edit {...props} ref={ref}/>),\n    Export: forwardRef((props, ref) => <SaveAlt {...props} ref={ref}/>),\n    Filter: forwardRef((props, ref) => <FilterList {...props} ref={ref}/>),\n    FirstPage: forwardRef((props, ref) => <FirstPage {...props} ref={ref}/>),\n    LastPage: forwardRef((props, ref) => <LastPage {...props} ref={ref}/>),\n    NextPage: forwardRef((props, ref) => <ChevronRight {...props} ref={ref}/>),\n    PreviousPage: forwardRef((props, ref) => <ChevronLeft {...props} ref={ref}/>),\n    ResetSearch: forwardRef((props, ref) => <Clear {...props} ref={ref}/>),\n    Search: forwardRef((props, ref) => <Search {...props} ref={ref}/>),\n    SortArrow: forwardRef((props, ref) => <ArrowUpward {...props} ref={ref}/>),\n    ThirdStateCheck: forwardRef((props, ref) => <Remove {...props} ref={ref}/>),\n    ViewColumn: forwardRef((props, ref) => <ViewColumn {...props} ref={ref}/>)\n};","import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {localtime_exact} from \"../controller/utils\";\nimport TagChip from \"../Component/TagChip/TagChip\";\n\nexport default function TasksTable(props) {\n    const history = useHistory();\n    const {tasks} = props;\n\n    return (\n        <MaterialTable icons={tableIcons} columns={[\n            {title: \"漫画\", field: \"mname\", defaultGroupOrder: 1},\n            {title: \"章节\", field: \"cname\"},\n            {title: \"任务\", field: \"name\"},\n            {title: \"类型\", field: \"type\", lookup: {\n                    0: \"其他\",\n                    1: \"图源\",\n                    2: \"翻译\",\n                    3: \"校对\",\n                    4: \"嵌字\",\n                    5: \"审核\",\n                    6: \"发布\",\n                }, defaultGroupOrder: 0},\n            {title: \"标签\", field: \"tags\", render: task =>\n                <>{task[\"tags\"].map((tag, key) => {\n                    return <TagChip tag={tag} size=\"small\" key={key}/>;\n                })}</>\n                , sorting: false},\n            {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"]), grouping: false},\n        ]} options={{\n            pageSize: 20,\n            grouping: true,\n        }} data={tasks} components={{\n            Toolbar: props => (<></>)\n        }} onRowClick={(event, rowData, togglePanel) => {\n            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n        }} localization={{\n            grouping: {\n                placeholder: \"拖拽表头至此以聚合显示...\",\n                groupedBy: \"聚合:\"\n            },\n            pagination: {\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                labelRowsSelect: '行',\n                labelRowsPerPage: '每页行数:',\n                firstAriaLabel: '首页',\n                firstTooltip: '首页',\n                previousAriaLabel: '上一页',\n                previousTooltip: '上一页',\n                nextAriaLabel: '下一页',\n                nextTooltip: '下一页',\n                lastAriaLabel: '末页',\n                lastTooltip: '末页'\n            },\n        }}/>\n    );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {setTitle} from \"../controller/utils\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_TASK} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\nimport {Box} from \"@material-ui/core\";\nimport TasksTable from \"./TasksTable\";\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    taskListItem: {\n        marginTop: theme.spacing(1)\n    }\n}));\n\nexport default function TasksPage() {\n    const classes = useStyles();\n    const [tasks, setTasks] = useState([]);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setTitle(\"任务广场\");\n        dispatch(setBusy(true));\n        axios.get(API_TASK, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <Container>\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                <div className={classes.title}>\n                    <Typography variant=\"h2\">任务广场</Typography>\n                </div>\n                <TasksTable tasks={tasks}/>\n            </Box>\n        </Container>\n    );\n}","import React, {useEffect} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\n\nimport { useDispatch } from \"react-redux\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport {auth} from \"../controller/user\";\nimport {setTitle} from \"../controller/utils\";\nimport Leaf from \"mdi-material-ui/Leaf\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nexport default function LoginPage() {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n\n    let history = useHistory();\n    let location = useLocation();\n    let { from } = location.state || { from: { pathname: \"/\" } };\n\n    useEffect(() => setTitle(\"登录\"), []);\n\n    let login = (event) => {\n        event.preventDefault();\n        event.stopPropagation();\n        dispatch(auth(document.getElementById('uid').value, document.getElementById('pass').value, history, from));\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline />\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <Leaf />\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    登录\n                </Typography>\n                <form className={classes.form} onSubmit={login}>\n                    <TextField variant=\"outlined\" margin=\"normal\" required fullWidth id=\"uid\" label=\"用户ID\" name=\"uid\"\n                               autoComplete=\"uid\" autoFocus/>\n                    <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"pass\" label=\"密码\"\n                               type=\"password\" id=\"pass\" autoComplete=\"current-password\"/>\n                    <Button fullWidth variant=\"contained\" color=\"primary\" className={classes.submit} type=\"submit\">\n                        登录\n                    </Button>\n                </form>\n            </div>\n        </Container>\n    );\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from \"@material-ui/core/FormControl\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport FormLabel from \"@material-ui/core/FormLabel\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\n\nimport {Form} from 'react-final-form';\nimport {TextField} from 'mui-rff';\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\nexport default function NewChapterButton(props) {\n    const {mid} = props;\n    const [open, setOpen] = React.useState(false);\n    const [route, setRoute] = React.useState({no1: false, no2: false, no4: false, empty: false});\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleRouteChange = (event) => {\n        setRoute({...route, [event.target.name]: event.target.checked});\n    };\n\n    const onSubmit = (values) => {\n        let type = route[\"no1\"] ? 1 : 0;\n        type += route[\"no2\"] ? 2 : 0;\n        type += route[\"no4\"] ? 4 : 0;\n        type += route[\"empty\"] ? 8 : 0;\n        values[\"ps\"] = \"\";\n        console.log(type);\n        console.log(values);\n        axios.put(API_MANGA + \"/\" + mid + \"/chapter\", values, {\n            params: {type: type},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button color=\"primary\" onClick={handleClickOpen} variant=\"outlined\">\n                新建章节\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">新建章节</DialogTitle>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"章节标题\" type=\"string\" fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"章节ID\" type=\"string\" fullWidth helperText=\"章节ID会出现在URL上，同一漫画内不可重名，最好避免使用汉字。\"/>\n                            <FormControl component=\"fieldset\">\n                                <FormLabel component=\"legend\">自定义任务流程</FormLabel>\n                                <FormGroup row>\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no1\"]} onChange={handleRouteChange}\n                                                           name=\"no1\"/>}\n                                        label=\"无图源\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no2\"]} onChange={handleRouteChange}\n                                                           name=\"no2\"/>}\n                                        label=\"无校对\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"no4\"]} onChange={handleRouteChange}\n                                                           name=\"no4\"/>}\n                                        label=\"无审核\" disabled={route[\"empty\"]}\n                                    />\n                                    <FormControlLabel\n                                        control={<Checkbox checked={route[\"empty\"]} onChange={handleRouteChange}\n                                                           name=\"empty\"/>}\n                                        label=\"空项目\"\n                                    />\n                                </FormGroup>\n                            </FormControl>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import Briefcase from \"mdi-material-ui/Briefcase\";\nimport ImageMultiple from \"mdi-material-ui/ImageMultiple\";\nimport TranslateIcon from \"@material-ui/icons/Translate\";\nimport FormTextboxPassword from \"mdi-material-ui/FormTextboxPassword\";\nimport Palette from \"mdi-material-ui/Palette\";\nimport Gavel from \"mdi-material-ui/Gavel\";\nimport Rocket from \"mdi-material-ui/Rocket\";\nimport React from \"react\";\n\nexport function taskIcon(n) {\n    const icons = {\n        0: <Briefcase/>,\n        1: <ImageMultiple/>,\n        2: <TranslateIcon/>,\n        3: <FormTextboxPassword/>,\n        4: <Palette/>,\n        5: <Gavel/>,\n        6: <Rocket/>\n    };\n    return icons[n];\n}","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport {taskIcon} from \"./icons\";\n\nexport default function TaskChip(props) {\n    const {label} = props;\n\n    return (\n        <div>\n            <Chip {...props} variant={label[\"accept_by\"][\"uid\"] === \"\" ? \"outlined\" : \"default\"} icon={taskIcon(label[\"type\"])}\n                  color={label[\"status\"] === 0 || label[\"status\"] === 1 ? \"primary\" :\n                      label[\"status\"] === 2 ? \"secondary\" : \"\"} size={\"small\"}\n                  label={label[\"name\"]} clickable aria-label=\"Task Chip\"\n                  to={\"/manga/\" + label[\"mid\"] + \"/\" + label[\"cid\"] + \"/\" + label[\"id\"]}/>\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Stepper from \"@material-ui/core/Stepper\";\nimport StepButton from \"@material-ui/core/StepButton\";\nimport StepLabel from \"@material-ui/core/StepLabel\";\nimport Step from \"@material-ui/core/Step\";\nimport TaskChip from \"../../Component/TaskChip/TaskChip\";\nimport {Link} from \"react-router-dom\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    nominee: {\n        marginBottom: 10\n    },\n    completed: {\n        color: theme.palette.primary\n    }\n}));\n\nexport default function ChapterListItem(props) {\n    const classes = useStyles();\n    const {vertical, chapter, mid} = props;\n\n    const tasks = chapter[\"tasks\"];\n    const cid = chapter[\"id\"];\n\n    return (\n        <div className={classes.root}>\n            <Stepper alternativeLabel={!vertical} nonLinear activeStep={-1} orientation={vertical ? \"vertical\" : \"horizontal\"}>\n                {tasks.map((label, index) => (\n                    <Step key={label[\"name\"]}>\n                        <StepButton component={Link} to={\"/manga/\" + mid + \"/\" + cid + \"/\" + label[\"id\"]}\n                                    completed={label[\"status\"] === 1}>\n                            <StepLabel>\n                                <TaskChip label={label}/>\n                            </StepLabel>\n                        </StepButton>\n                    </Step>\n\n                ))}\n            </Stepper>\n        </div>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\n\nimport {taskIcon} from \"../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport {TextField, Select} from \"mui-rff\";\n\n\nexport default function NewTaskButton(props) {\n    const {chapter, order} = props;\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        console.log(values);\n        axios.put(API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"] + \"/task\", values, {\n            params: {order: order},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button size=\"small\" color=\"primary\" onClick={handleClickOpen}>\n                新建任务\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">新建任务</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{type: 0}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <Select name=\"type\" label=\"类型\" required>\n                                <MenuItem value={0}>{taskIcon(0)}其他</MenuItem>\n                                <MenuItem value={1}>{taskIcon(1)}图源</MenuItem>\n                                <MenuItem value={2}>{taskIcon(2)}翻译</MenuItem>\n                                <MenuItem value={3}>{taskIcon(3)}校对</MenuItem>\n                                <MenuItem value={4}>{taskIcon(4)}嵌字</MenuItem>\n                                <MenuItem value={5}>{taskIcon(5)}审核</MenuItem>\n                                <MenuItem value={6}>{taskIcon(6)}发布</MenuItem>\n                            </Select>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"任务标题\" type=\"string\" required\n                                       fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"任务ID\" type=\"string\" required fullWidth/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Box from \"@material-ui/core/Box\";\n\nimport {ReactSortable} from \"react-sortablejs\";\nimport NewTaskButton from \"../NewTaskButton\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from \"@material-ui/core/ListItemIcon\";\nimport ListSubheader from \"@material-ui/core/ListSubheader\";\nimport DragHandleIcon from '@material-ui/icons/DragHandle';\nimport {taskIcon} from \"../../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport {TextField} from \"mui-rff\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useHistory} from \"react-router\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function EditChapterButton(props) {\n    const {chapter} = props;\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const [tasksList, setTasksList] = React.useState([]);\n\n    React.useEffect(() => {\n        let tasks = chapter[\"tasks\"].slice();\n        for (let i = 0; i < tasks.length; i++) {\n            tasks[i][\"order\"] = i;\n        }\n        setTasksList(tasks);\n    }, []);\n\n    const onSubmit = (values) => {\n        values[\"tasks\"] = tasksList.map(task => task.order);\n        values[\"ps\"] = values[\"ps\"] ? values[\"ps\"] : \"\";\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== chapter[\"id\"])\n                history.replace(\"/manga/\" + res[\"mid\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" size=\"small\" color=\"primary\" onClick={handleClickOpen}>\n                编辑章节\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">编辑章节</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{name: chapter[\"name\"], id: chapter[\"id\"], ps: chapter[\"ps\"]}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <TextField margin=\"dense\" name=\"name\" label=\"章节标题\" type=\"string\" fullWidth/>\n                    <TextField margin=\"dense\" name=\"id\" label=\"章节ID\" type=\"string\" fullWidth helperText=\"章节ID会出现在URL上，同一漫画内不可重名，最好避免使用汉字。建议：章节数字。\"/>\n                    <TextField name=\"ps\" label={\"備考\"} multiline rowsMax={5}/>\n                    <List subheader={\n                        <ListSubheader component=\"div\">\n                            <Box display=\"flex\" flexDirection=\"row\" alignItems=\"flex-end\">\n                                <Box flexGrow={1}><DialogContentText>任务</DialogContentText></Box>\n                                <Box><NewTaskButton chapter={chapter} order={chapter[\"tasks\"].length}/></Box>\n                            </Box>\n                        </ListSubheader>\n                    }>\n                        <ReactSortable list={tasksList} setList={setTasksList} animation={150}>\n                            {tasksList.map((task, order) => (\n                                <ListItem key={order}>\n                                    <ListItemIcon>\n                                        {taskIcon(task[\"type\"])}\n                                    </ListItemIcon>\n                                    <ListItemText primary={task[\"name\"]}/>\n                                    <DragHandleIcon/>\n                                </ListItem>\n                            ))}\n                        </ReactSortable>\n                    </List>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleClose} color=\"primary\">\n                        取消\n                    </Button>\n                    <Button type=\"submit\" color=\"primary\">\n                        保存\n                    </Button>\n                </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport TextField from \"@material-ui/core/TextField\";\n\nimport axios from \"axios\";\nimport {useDispatch} from \"react-redux\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function DeleteButton(props) {\n    const {id, name, api, callback, reload, ...others} = props;\n    const [open, setOpen] = React.useState(false);\n    const [input, setInput] = React.useState();\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const handleInput = (event) => {setInput(event.target.value)};\n\n    const onSubmit = () => {\n        axios.delete(api, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => {\n            if (reload) window.location.reload();\n            history.replace(callback);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"contained\" color=\"secondary\" onClick={handleClickOpen} {...others}>删除{name}</Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                        <DialogTitle id=\"form-dialog-title\">确认删除</DialogTitle>\n                        <DialogContent>\n                            <DialogContentText>\n                                删除后将不可恢复\n                            </DialogContentText>\n                            {id && <><DialogContentText>请在下方重复输入ID以确认</DialogContentText>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label={id} type=\"string\" onChange={handleInput} fullWidth required/></>}\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button onClick={onSubmit} variant=\"contained\" color=\"secondary\" disabled={input !== id}>\n                                删除\n                            </Button>\n                        </DialogActions>\n            </Dialog>\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ChapterStepper from \"../ChapterStepper/ChapterStepper\";\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport {useTheme} from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Box from \"@material-ui/core/Box\";\nimport EditChapterButton from \"./EditChapterButton\";\nimport TaskChip from \"../../Component/TaskChip/TaskChip\";\nimport {Link} from \"react-router-dom\";\nimport {API_MANGA} from \"../../constant\";\nimport DeleteButton from \"../../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    rootExpanded: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    taskChip: {\n        marginRight: theme.spacing(1),\n    },\n    summary: {\n        width: '100%',\n    },\n}));\n\nexport default function ChapterListItem(props) {\n    const classes = useStyles();\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up('md'));\n\n    const {chapter, adminAuth, mid, expanded, setExpanded} = props;\n\n    const handleExpand = () => {\n        if (expanded === chapter[\"id\"]) setExpanded(\"\");\n        else setExpanded(chapter[\"id\"]);\n    };\n\n    return (\n        <div className={expanded === chapter[\"id\"] ? classes.rootExpanded : classes.root}>\n            <ExpansionPanel TransitionProps={{ unmountOnExit: true }} expanded={expanded === chapter[\"id\"]} onChange={handleExpand}>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"chapter-summary\">\n                    <Box display=\"flex\" flexDirection=\"row\" className={classes.summary}>\n                        <Box flexGrow={1}>\n                            <Typography className={classes.heading} noWrap>{chapter[\"name\"]}</Typography>\n                        </Box>\n                        <Box display=\"flex\" flexDirection=\"row\">\n                            {chapter[\"tasks\"].map((task, key) => {\n                                return task[\"status\"] === 0 &&\n                                    <TaskChip label={task} key={key} className={classes.taskChip} component={Link} />\n                            })}\n                        </Box>\n                    </Box>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box  display=\"flex\" flexDirection=\"column\" className={classes.summary}>\n                    <ChapterStepper vertical={!isDesktop} chapter={chapter} mid={mid}/>\n                    <Typography className={classes.secondaryHeading}>{chapter[\"ps\"]}</Typography>\n                    </Box>\n                </ExpansionPanelDetails>\n                {adminAuth && <>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <DeleteButton api={API_MANGA + \"/\" + mid + \"/chapter/\" + chapter[\"id\"]}\n                                      callback={\"/manga/\" + mid} className={classes.button} size=\"small\" variant=\"outlined\" reload/>\n                        <EditChapterButton chapter={chapter}/>\n                    </ExpansionPanelActions>\n                </>}\n            </ExpansionPanel>\n        </div>\n    );\n}\n","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ChapterListItem from \"./ChapterListItem\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n    }\n}));\n\n\nexport default function ChapterList(props) {\n    const classes = useStyles();\n    const {mid, adminAuth} = props;\n    const [value, setValue] = React.useState(0);\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <div className={classes.root}>\n            <AppBar position=\"static\" color={\"transparent\"}>\n                <Tabs value={value} onChange={handleChange}>\n                    <Tab label=\"未完成\"/>\n                    <Tab label=\"已完成\"/>\n                </Tabs>\n            </AppBar>\n            <SubChapterList mid={mid} listName={value} adminAuth={adminAuth}/>\n\n        </div>\n    );\n}\n\nexport function SubChapterList(props) {\n    const {mid, listName, adminAuth} = props;\n    const [loading, setLoading] = useState(true);\n    const [chapters, setChapters] = useState([]);\n    const [expanded, setExpanded] = useState(\"\");\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        setLoading(true);\n        setChapters([]);\n        axios.get(API_MANGA + \"/\" + mid + \"/chapter\", {\n            params: {\n                query_status: listName\n            },\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    typeof res[\"chapters\"] === \"object\" && setChapters(res[\"chapters\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\n        }).finally(() => setLoading(false));\n    },[listName]);\n\n    return <>{loading ? <LinearProgress/> : chapters.map((chapter) =>\n            (<ChapterListItem chapter={chapter} adminAuth={adminAuth} mid={mid} key={chapter.id} expanded={expanded} setExpanded={setExpanded}/>)\n        )}</>;\n}","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport UserAutocomplete from \"../Component/UserAutocomplete/UserAutocomplete\";\n\nimport {Form, Field} from 'react-final-form';\nimport {TextField, Checkboxes} from 'mui-rff';\nimport ImgUrlTextField from \"../Component/ImgUrlTextField/ImgUrlTextField\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setSnackbar} from \"../controller/site\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function EditMangaButton(props) {\n    const {manga} = props;\n    const privilege = useSelector(state => state.user.privilege);\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"producer\"] = document.getElementById(\"producer\").value;\n        values[\"cover\"] = document.getElementById(\"cover\").value;\n        values[\"cherry\"] = values[\"cherry\"] === true;\n        values[\"status\"] = values[\"status\"] === true ? 1 : 0;\n        values[\"ps\"] = values[\"ps\"] ? values[\"ps\"] : \"\";\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + manga[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== manga[\"id\"])\n                history.replace(\"/manga/\" + res[\"id\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" color=\"primary\" size=\"small\" onClick={handleClickOpen}>编辑漫画</Button>\n\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <Form initialValues={{name: manga.name, id: manga.id, cherry: manga.cherry, status: manga.status === 1, ps: manga.ps}}\n                    onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogTitle id=\"form-dialog-title\">编辑漫画</DialogTitle>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"漫画名称\" type=\"string\" fullWidth required/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"漫画ID\" type=\"string\" fullWidth required helperText=\"漫画ID会出现在URL上，不可重名，最好避免使用汉字。\"/>\n                            <Checkboxes\n                                name=\"cherry\"\n                                data={{label: \"夏蜜樱桃\", value: \"cherry\"}}\n                            />\n                            <Checkboxes\n                                name=\"status\"\n                                data={{label: \"不再更新\", value: \"cherry\"}}\n                            />\n                            <Field component={ UserAutocomplete } name=\"producer\" label=\"制作人\" id=\"producer\" disabled={privilege < 2} initVal={manga.producer}/>\n                            <Field component={ImgUrlTextField} name=\"cover\" initVal={manga.cover}/>\n                            <TextField name=\"ps\" label={\"備考\"} multiline rowsMax={5}/>\n                        </DialogContent>\n\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                修改\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n    );\n}\n","import React from \"react\";\nimport Chip from \"@material-ui/core/Chip\";\nimport AvatarIcon from \"../AvatarIcon/AvatarIcon\";\nimport {useHistory} from \"react-router-dom\";\n\nexport default function UserChip(props) {\n    const {user} = props;\n    const history = useHistory();\n\n    if (user === undefined) return (<></>);\n\n    const handleClick = () => {\n        history.push(\"/user/\" + user[\"uid\"]);\n    };\n\n    return (\n        <Chip variant=\"outlined\" aria-label=\"User Chip\" onClick={handleClick} clickable\n              avatar={<AvatarIcon avatar={user[\"avatar\"]} name={user[\"nickname\"]}/>} label={user[\"nickname\"]} {...props}/>\n    );\n}","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport clsx from \"clsx\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport Box from \"@material-ui/core/Box\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Collapse from \"@material-ui/core/Collapse\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport EditMangaButton from \"./EditMangaButton\";\nimport UserChip from \"../Component/UserChip/UserChip\";\n\nimport {localtime} from \"../controller/utils\";\nimport {API_MANGA} from \"../constant\";\nimport DeleteButton from \"../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%',\n        marginTop: theme.spacing(1)\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n}));\n\nexport default function Metadata(props) {\n    const classes = useStyles();\n    const {manga, adminAuth} = props;\n    const [expanded, setExpanded] = React.useState(true);\n\n    const handleExpandClick = () => {\n        setExpanded(!expanded);\n    };\n\n    return (\n        <Box display={\"flex\"} flexDirection={\"column\"} className={classes.root}>\n            <Box display={\"flex\"}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">详细信息</Typography>\n                </Box>\n                <Box alignSelf={\"flex-end\"}>\n                    <IconButton\n                        className={clsx(classes.expand, {\n                            [classes.expandOpen]: expanded,\n                        })}\n                        onClick={handleExpandClick}\n                        aria-expanded={expanded}\n                        aria-label=\"详情\"\n                    >\n                        <ExpandMoreIcon/>\n                    </IconButton>\n                </Box>\n            </Box>\n            <Collapse in={expanded} timeout=\"auto\" unmountOnExit>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\n\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>制作人</Typography></Box>\n                            <Box><UserChip user={manga.producer} size=\"small\"/></Box>\n                        </Box>\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>开坑时间</Typography></Box>\n                            <Box>{localtime(manga.create_on)}</Box>\n                        </Box>\n                        <Box display=\"flex\" flexDirection={\"row\"}>\n                            <Box flexGrow={1}><Typography>最后一次活跃</Typography></Box>\n                            <Box>{localtime(manga.last_update)}</Box>\n                        </Box>\n                        <Box>\n                            <Typography paragraph>{manga.ps}</Typography>\n                        </Box>\n                    </Box>\n                </ExpansionPanelDetails>\n                <Divider/>\n                <ExpansionPanelActions>\n                    {adminAuth && <>\n                        <DeleteButton api={API_MANGA + \"/\" + manga[\"id\"]} size=\"small\" variant=\"outlined\"\n                                      callback={\"\"} className={classes.button} id={manga[\"id\"]} name={\"漫画\"}/>\n                                      <EditMangaButton manga={manga}/></>}\n                </ExpansionPanelActions>\n            </Collapse>\n        </Box>\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport Chip from \"@material-ui/core/Chip\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport TagChip from \"../TagChip/TagChip\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\n\nimport {TextField, Select} from \"mui-rff\";\nimport {Form} from \"react-final-form\";\nimport axios from \"axios\";\nimport {API_TAG} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {setSnackbar} from \"../../controller/site\";\nimport {useDispatch} from \"react-redux\";\n\n\nexport default function AddTagChip(props) {\n    const [open, setOpen] = React.useState(false);\n    const {level, mid, cid, tid} = props;\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        values[\"level\"] = level;\n        values[\"mid\"] = mid;\n        values[\"cid\"] = typeof cid === \"string\" ? cid : \"\";\n        values[\"tid\"] = typeof tid === \"string\" ? tid : \"\";\n        console.log(values);\n        axios.put(API_TAG, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => window.location.reload()).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n\n    return (\n        <>\n            <Chip label={\"+\"} size=\"small\" clickable onClick={handleClickOpen} {...props}/>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">添加标签</DialogTitle>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"名称\" type=\"string\" fullWidth required/>\n                            <InputLabel>颜色</InputLabel>\n                            <Select name=\"color\" required>\n                                <MenuItem value={\"red\"}><TagChip tag={{color: \"red\", name: \"红色\"}} size=\"small\"\n                                                                 clickable/></MenuItem>\n                                <MenuItem value={\"pink\"}><TagChip tag={{color: \"pink\", name: \"粉色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"blue\"}><TagChip tag={{color: \"blue\", name: \"蓝色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"purple\"}><TagChip tag={{color: \"purple\", name: \"紫色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"indigo\"}><TagChip tag={{color: \"indigo\", name: \"靛蓝色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"cyan\"}><TagChip tag={{color: \"cyan\", name: \"青色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"teal\"}><TagChip tag={{color: \"teal\", name: \"水鸭色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"lime\"}><TagChip tag={{color: \"lime\", name: \"绿黄色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                                <MenuItem value={\"orange\"}><TagChip tag={{color: \"orange\", name: \"橘黄色\"}} size=\"small\"\n                                                                    clickable/></MenuItem>\n                                <MenuItem value={\"brown\"}><TagChip tag={{color: \"brown\", name: \"棕色\"}} size=\"small\"\n                                                                   clickable/></MenuItem>\n                                <MenuItem value={\"gray\"}><TagChip tag={{color: \"gray\", name: \"灰色\"}} size=\"small\"\n                                                                  clickable/></MenuItem>\n                            </Select>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button onClick={handleSubmit} color=\"primary\">\n                                添加\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </>\n\n    );\n}\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport {taskIcon} from \"../../../Component/TaskChip/icons\";\nimport {Form} from \"react-final-form\";\nimport {useDispatch} from \"react-redux\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {tokenHeader} from \"../../../controller/user\";\nimport {setSnackbar} from \"../../../controller/site\";\nimport {TextField, Select} from \"mui-rff\";\nimport {useHistory} from \"react-router\";\n\n\nexport default function EditTaskButton(props) {\n    const {task} = props;\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    const [open, setOpen] = React.useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        console.log(values);\n        axios.post(API_MANGA + \"/\" + task[\"mid\"] + \"/chapter/\" + task[\"cid\"] + \"/task/\" + task[\"id\"], values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            if (res[\"id\"] !== task[\"id\"])\n                history.replace(\"/manga/\" + res[\"mid\"] + \"/\" + res[\"cid\"] + \"/\" + res[\"id\"]);\n            window.location.reload();\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return (\n        <div>\n            <Button variant=\"outlined\" size=\"small\" color=\"primary\" onClick={handleClickOpen} {...props}>\n                编辑任务\n            </Button>\n            <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\">\n                <DialogTitle id=\"form-dialog-title\">编辑任务</DialogTitle>\n                <Form onSubmit={onSubmit} initialValues={{type: task[\"type\"], name: task[\"name\"], \"id\": task[\"id\"]}} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <DialogContent>\n                            <Select name=\"type\" label=\"类型\" required>\n                                <MenuItem value={0}>{taskIcon(0)}其他</MenuItem>\n                                <MenuItem value={1}>{taskIcon(1)}图源</MenuItem>\n                                <MenuItem value={2}>{taskIcon(2)}翻译</MenuItem>\n                                <MenuItem value={3}>{taskIcon(3)}校对</MenuItem>\n                                <MenuItem value={4}>{taskIcon(4)}嵌字</MenuItem>\n                                <MenuItem value={5}>{taskIcon(5)}审核</MenuItem>\n                                <MenuItem value={6}>{taskIcon(6)}发布</MenuItem>\n                            </Select>\n                            <TextField autoFocus margin=\"dense\" name=\"name\" label=\"任务标题\" type=\"string\" required\n                                       fullWidth/>\n                            <TextField margin=\"dense\" name=\"id\" label=\"任务ID\" type=\"string\" required fullWidth/>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={handleClose} color=\"primary\">\n                                取消\n                            </Button>\n                            <Button type=\"submit\" color=\"primary\">\n                                保存\n                            </Button>\n                        </DialogActions>\n                    </form>)}/>\n            </Dialog>\n        </div>\n\n    );\n}\n","import React from 'react';\n\nexport default function DataRender(props) {\n    return (\n        <></>\n    );\n}\n","import React from \"react\";\nimport EditIcon from '@material-ui/icons/Edit';\nimport DoneIcon from \"@material-ui/icons/Done\";\nimport LockIcon from '@material-ui/icons/Lock';\n\n\nexport default function StatusIcon(props) {\n    const {status, ...others} = props;\n\n    return (<>\n        {status === 0 && <EditIcon {...others}/>}\n        {status === 1 && <DoneIcon {...others}/>}\n        {status === 2 && <LockIcon {...others}/>}\n    </>);\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Box from \"@material-ui/core/Box\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Button from \"@material-ui/core/Button\";\nimport DataRender from \"./DataRender\";\nimport {localtime_exact} from \"../../../controller/utils\";\nimport UserChip from \"../../../Component/UserChip/UserChip\";\n\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {setGoo, tokenHeader} from \"../../../controller/user\";\nimport {setBusy, setSnackbar} from \"../../../controller/site\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport {Field, Form} from \"react-final-form\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport UserAutocomplete from \"../../../Component/UserAutocomplete/UserAutocomplete\";\nimport StatusIcon from \"../../../Component/StatusIcon/StatusIcon\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    listItem: {\n        marginLeft: theme.spacing(1),\n        marginRight: theme.spacing(1),\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\nexport default function TaskBlock(props) {\n    const classes = useStyles();\n    const {task, adminAuth} = props;\n    const [taskState, setTaskState] = useState();\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        setTaskState(task);\n    }, [task]);\n\n    const handleDismiss = () => {\n        dispatch(setBusy(true));\n        axios.delete(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge\", {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(Object.assign({}, taskState, {accept_by: {uid: \"\", nickname: \"\", avatar: \"\"}}));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (\n        <div className={classes.root}>\n            <Box display=\"flex\" flexDirection=\"column\">\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography variant=\"h6\">承接人</Typography></Box>\n                    <Box>\n                        {taskState && taskState[\"accept_by\"][\"uid\"] !== \"\" &&\n                        <UserChip user={taskState[\"accept_by\"]}\n                                  onDelete={adminAuth && (taskState[\"status\"] === 0 || taskState[\"status\"] === 2) && handleDismiss}/>}\n                        {taskState && taskState[\"accept_by\"][\"uid\"] === \"\" &&\n                        <ToggleButtons taskState={taskState} setTaskState={setTaskState} {...props} />}\n                    </Box>\n                </Box>\n                <Divider/>\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography variant=\"h6\">状态</Typography></Box>\n                    <Box><Typography variant=\"h6\">{taskState && taskState[\"status\"] === 0 && <StatusIcon status={0}/>}\n                        {taskState && taskState[\"status\"] === 1 && <StatusIcon status={1}/>}\n                        {taskState && taskState[\"status\"] === 2 && <StatusIcon status={2}/>}\n                    </Typography></Box>\n                    <Box>{taskState &&\n                    <ToggleStatusButtons taskState={taskState} setTaskState={setTaskState} {...props}/>}</Box>\n\n                </Box>\n                {taskState && taskState[\"accept_by\"][\"uid\"] !== \"\" && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography>承接时间</Typography></Box>\n                        <Box>{localtime_exact(taskState[\"accept_on\"])}</Box>\n                    </Box>\n                </>}\n                {taskState && taskState[\"status\"] === 1 && <>\n                    <Divider/>\n                    <Box display=\"flex\" className={classes.listItem}>\n                        <Box flexGrow={1}><Typography>完成时间</Typography></Box>\n                        <Box>{localtime_exact(taskState[\"complete_on\"])}</Box>\n                    </Box>\n                </>}\n                <Divider/>\n                <Box display=\"flex\" className={classes.listItem}>\n                    <Box flexGrow={1}><Typography>创建时间</Typography></Box>\n                    <Box>{taskState && localtime_exact(taskState[\"create_on\"])}</Box>\n                </Box>\n            </Box>\n            <DataRender data={taskState && taskState[\"data\"]}/>\n        </div>\n    );\n}\n\nfunction ToggleButtons(props) {\n    const classes = useStyles();\n    const {taskState, adminAuth, setTaskState} = props;\n    const privilege = useSelector(state => state.user.privilege);\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n\n    const [open, setOpen] = useState(false);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onSubmit = (values) => {\n        handleAssign(values[\"assign_to\"])();\n        handleClose();\n    };\n\n    const handleAssign = (assign_to) => () => {\n        if (assign_to === uid) dispatch(setGoo());\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/charge\", {\n            params: {assign_to: assign_to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    if (privilege === 0) return <Typography>无</Typography>;\n\n    return <>\n        {adminAuth && <Button variant=\"contained\" color=\"primary\" onClick={handleClickOpen} className={classes.button}>分配</Button>}\n        {taskState[\"status\"] === 0 && <Button variant=\"contained\" color=\"primary\" onClick={handleAssign(uid)} className={classes.button}>承接</Button>}\n\n        <Dialog open={open} onClose={handleClose} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\n            <DialogTitle id=\"form-dialog-title\">分配</DialogTitle>\n            <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogContent>\n                        <Field component={ UserAutocomplete } name=\"assign_to\" label=\"分配\"/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            保存\n                        </Button>\n\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>;\n}\n\nfunction ToggleStatusButtons(props) {\n    const classes = useStyles();\n    const {taskState, adminAuth, setTaskState} = props;\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n\n    const handleStatusClick = (to) => () => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + taskState[\"mid\"] + \"/chapter/\" + taskState[\"cid\"] + \"/task/\" + taskState[\"id\"] + \"/status\", {\n            params: {to: to},\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setTaskState(res);\n            if (to === 1 && taskState[\"accept_by\"][\"uid\"] === uid) dispatch(setGoo());\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return <>{taskState[\"status\"] === 0 && <>\n        {adminAuth && <Button variant=\"contained\" color=\"secondary\" size=\"small\" onClick={handleStatusClick(2)} className={classes.button}><StatusIcon status={2}/>停止</Button>}\n        {(taskState[\"accept_by\"][\"uid\"] === uid || adminAuth) && taskState[\"accept_by\"][\"uid\"] !== \"\" &&\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(1)} className={classes.button}><StatusIcon status={1}/>完成</Button>}\n    </>}\n        {adminAuth && <>{taskState && taskState[\"status\"] === 1 &&\n        <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(0)} className={classes.button}><StatusIcon status={0}/>再开</Button>}\n            {taskState && taskState[\"status\"] === 2 &&\n            <Button variant=\"contained\" color=\"primary\" size=\"small\" onClick={handleStatusClick(0)} className={classes.button}><StatusIcon status={0}/>开始</Button>}</>}\n    </>;\n}","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {setBusy, setSnackbar} from \"../../../controller/site\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../../constant\";\nimport {setTitle} from \"../../../controller/utils\";\nimport {useDispatch} from \"react-redux\";\nimport {taskIcon} from \"../../../Component/TaskChip/icons\";\nimport EditTaskButton from \"./EditTaskButton\";\nimport TagChip from \"../../../Component/TagChip/TagChip\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport AddTagChip from \"../../../Component/TagChip/AddTagChip\";\nimport TaskInfo from \"./TaskInfo\";\nimport DeleteButton from \"../../../Component/DeleteButton/DeleteButton\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    },\n    button: {\n        marginLeft: theme.spacing(1),\n    }\n}));\n\nexport default function TaskBlock(props) {\n    const classes = useStyles();\n    const {manga, chapter, tid, adminAuth} = props;\n    const [task, setTask] = useState();\n    const dispatch = useDispatch();\n\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + chapter[\"id\"] + \"/task/\" + tid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTask(res);\n                    setTitle(manga.name + chapter.name + res.name);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取任务信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tid]);\n\n    return (\n        <div className={classes.root}>\n            <Typography variant=\"h5\">\n                {(typeof task === \"object\" && typeof task.tags === \"object\" && task.tags.map((tag, key) => {\n                    return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\n                                    deletable={adminAuth ? \"true\" : \"false\"} mid={manga[\"id\"]} cid={chapter[\"id\"]} tid={tid}/>;\n                })) || <Skeleton/>}\n                {typeof manga.tags === \"object\" && adminAuth &&\n                <AddTagChip className={classes.label} level={2} mid={manga[\"id\"]} cid={chapter[\"id\"]} tid={tid}/>}\n            </Typography>\n            <Box display=\"flex\" flexDirection=\"row\">\n                <Box flexGrow={1}>\n                    <Typography variant=\"h3\">{(task && <>{taskIcon(task[\"type\"])}{task[\"name\"]}</>) || <Skeleton/>}</Typography>\n                </Box>\n                {task && adminAuth && <>\n                    <DeleteButton api={API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + chapter[\"id\"] + \"/task/\" + tid} name=\"任务\"\n                                  variant=\"outlined\" size=\"small\" callback={\"/manga/\" + manga[\"id\"]} className={classes.button}/>\n                    <EditTaskButton task={task} className={classes.button}/></>}\n            </Box>\n            {task && <TaskInfo task={task} adminAuth={adminAuth}/>}\n        </div>\n    );\n}\n","import React from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport Typography from '@material-ui/core/Typography';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport Divider from '@material-ui/core/Divider';\nimport Box from \"@material-ui/core/Box\";\nimport EditChapterButton from \"../ChapterList/EditChapterButton\";\nimport UserChip from \"../../Component/UserChip/UserChip\";\nimport {API_MANGA} from \"../../constant\";\nimport DeleteButton from \"../../Component/DeleteButton/DeleteButton\";\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    secondaryHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        color: theme.palette.text.secondary,\n    },\n    details: {\n        alignItems: 'center',\n    },\n    staffItem: {\n        marginRight: theme.spacing(1),\n    },\n    summary: {\n        width: '100%',\n    },\n}));\n\nexport default function ChapterInfo(props) {\n    const classes = useStyles();\n    const {chapter, adminAuth} = props;\n\n    return (\n        <div className={classes.root}>\n            <ExpansionPanel>\n                <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"chapter-summary\">\n                    <Typography className={classes.heading} noWrap>{chapter[\"name\"]}</Typography>\n                </ExpansionPanelSummary>\n                <ExpansionPanelDetails className={classes.details}>\n                    <Box display=\"flex\" flexDirection=\"column\" className={classes.summary}>\n                        <Typography>Staff</Typography>\n                        <Box display=\"flex\" alignItems=\"center\">\n                            {chapter[\"tasks\"].map((task, key) => {\n                                if (task[\"accept_by\"][\"uid\"] !== \"\") {\n                                    return <span className={classes.staffItem} key={key}>\n                                        <span>{task[\"name\"]}</span><UserChip user={task[\"accept_by\"]} size=\"small\"/>\n                                    </span>\n                                }\n                            })}\n                        </Box>\n                        <Typography>備考</Typography>\n                        <Typography className={classes.secondaryHeading}>{chapter[\"ps\"]}</Typography>\n                    </Box>\n                </ExpansionPanelDetails>\n                {adminAuth && <>\n                    <Divider/>\n                    <ExpansionPanelActions>\n                        <DeleteButton api={API_MANGA + \"/\" + chapter[\"mid\"] + \"/chapter/\" + chapter[\"id\"]} name=\"章节\"\n                                      callback={\"/manga/\" + chapter[\"mid\"]} className={classes.button} size=\"small\" variant=\"outlined\"/>\n                        <EditChapterButton chapter={chapter}/>\n                    </ExpansionPanelActions>\n                </>}\n            </ExpansionPanel>\n        </div>\n    );\n}\n","import React, {useState} from 'react';\nimport {makeStyles} from '@material-ui/core/styles';\nimport {useHistory, useParams} from \"react-router-dom\";\nimport TaskBlock from \"./TaskBlock/TaskBlock\";\nimport {setBusy, setSnackbar} from \"../../controller/site\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../../constant\";\nimport {useDispatch} from \"react-redux\";\nimport MobileStepper from '@material-ui/core/MobileStepper';\nimport Button from '@material-ui/core/Button';\nimport KeyboardArrowLeft from '@material-ui/icons/KeyboardArrowLeft';\nimport KeyboardArrowRight from '@material-ui/icons/KeyboardArrowRight';\nimport ChapterInfo from \"./ChapterInfo\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        width: '100%'\n    },\n}));\n\nexport default function ChapterBlock(props) {\n    const classes = useStyles();\n    const {manga, adminAuth} = props;\n    const {cid, tid} = useParams();\n    const [chapter, setChapter] = useState();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const [order, setOrder] = useState(0);\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + manga[\"id\"] + \"/chapter/\" + cid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    for (let i = 0; i < res[\"tasks\"].length; i++) {\n                        if (res[\"tasks\"][i][\"id\"] === tid) {\n                            setOrder(i);\n                            break;\n                        }\n                    }\n                    setChapter(res);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取章节信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    const handleBack = () => {\n        history.replace(\"/manga/\" + manga[\"id\"] + \"/\" + chapter[\"id\"] + \"/\" + chapter[\"tasks\"][order - 1][\"id\"]);\n        setOrder(order - 1);\n    };\n\n    const handleNext = () => {\n        history.replace(\"/manga/\" + manga[\"id\"] + \"/\" + chapter[\"id\"] + \"/\" + chapter[\"tasks\"][order + 1][\"id\"]);\n        setOrder(order + 1);\n    };\n\n\n    return (\n        <div className={classes.root}>\n            {chapter && <ChapterInfo chapter={chapter} mid={manga.id} adminAuth={adminAuth}/>}\n            {chapter && <MobileStepper position=\"static\" activeStep={order} backButton={\n                <Button size=\"small\" onClick={handleBack} disabled={order === 0}>\n                    <KeyboardArrowLeft/>上一个任务\n                </Button>\n            } nextButton={\n                <Button size=\"small\" onClick={handleNext} disabled={order === chapter[\"tasks\"].length - 1}>\n                    下一个任务<KeyboardArrowRight/>\n                </Button>\n            } steps={chapter[\"tasks\"].length}/>}\n            {chapter && <TaskBlock chapter={chapter} {...props} tid={chapter[\"tasks\"][order][\"id\"]}/>}\n        </div>\n    );\n}\n","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {Route, Switch, useParams, useRouteMatch, Link as RouterLink} from \"react-router-dom\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport cover from \"../cover.jpeg\";\n\nimport NewChapterButton from \"./NewChapterButton\";\nimport ChapterList from \"./ChapterList/ChapterList\";\nimport Metadata from \"./Metadata\";\nimport axios from \"axios\";\nimport {API_MANGA} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport TagChip from \"../Component/TagChip/TagChip\";\nimport {setTitle} from \"../controller/utils\";\nimport AddTagChip from \"../Component/TagChip/AddTagChip\";\nimport Link from \"@material-ui/core/Link\";\nimport ChapterBlock from \"./ChapterBlock/ChapterBlock\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n    coverCard: {\n        maxWidth: 275,\n        position: \"relative\"\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    }\n}));\n\nexport default function MangaPage(props) {\n    const classes = useStyles();\n    const {mid} = useParams();\n    const {path} = useRouteMatch();\n    const dispatch = useDispatch();\n    const privilege = useSelector(state => state.user.privilege);\n    const uid = useSelector(state => state.user.uid);\n    const [adminAuth, setAdminAuth] = useState(false);\n\n    const [manga, setManga] = useState({});\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_MANGA + \"/\" + mid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setManga(res);\n                    setTitle(res.name);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取漫画信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        setAdminAuth(privilege >= 2 || (typeof manga.producer === \"object\" && manga.producer.uid === uid));\n    }, [privilege, uid, manga]);\n\n    return (\n        <Container maxWidth={\"lg\"}>\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">\n                        {(typeof manga.tags === \"object\" && manga.tags.map((tag, key) => {\n                            return <TagChip key={key} size=\"small\" tag={tag} className={classes.label}\n                                            deletable={adminAuth ? \"true\" : \"false\"} mid={mid}/>;\n                        })) || <Skeleton/>}\n                        {typeof manga.tags === \"object\" && adminAuth &&\n                        <AddTagChip className={classes.label} level={0} mid={manga[\"id\"]}/>}\n                    </Typography>\n                    <Typography variant=\"h2\">\n                        {<Link component={RouterLink} to={\"/manga/\" + manga[\"id\"]}\n                               color=\"inherit\">{manga.name}</Link> || <Skeleton/>}\n                    </Typography>\n                </Box>\n                <Switch>\n                    <Route exact path={path}>\n                        <Box>{adminAuth && <NewChapterButton mid={manga[\"id\"]}/>}</Box>\n                    </Route>\n                </Switch>\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={3}>\n                    <Box display={\"flex\"} p={1} justifyContent=\"center\" flexDirection={\"column\"} alignItems=\"center\">\n                        <Card className={classes.coverCard}>\n                            <CardMedia\n                                component={\"img\"}\n                                image={manga.cover || cover}\n                                title={manga.name}\n                            />\n                        </Card>\n                        <Metadata manga={manga} adminAuth={adminAuth}/>\n                    </Box>\n                </Grid>\n                <Grid item xs={12} md={9}>\n                    <Switch>\n                        <Route exact path={path}>\n                            <ChapterList mid={mid} adminAuth={adminAuth}/>\n                        </Route>\n                        <Route path={`${path}/:cid/:tid`}>\n                            {manga[\"id\"] && <ChapterBlock adminAuth={adminAuth} manga={manga}/>}\n                        </Route>\n                    </Switch>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n","import React from \"react\";\nimport {Route, Redirect} from \"react-router-dom\";\nimport {useSelector} from \"react-redux\";\n\nexport default function PrivateRoute({ children, ...rest }) {\n    const privilege = useSelector(state => state.user.privilege);\n    const logging = useSelector(state => state.user.logging);\n\n    return (!logging ? (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                privilege > 0 ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: location }\n                        }}\n                    />\n                )\n            }\n        />\n    ) : (<div/>));\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport {localtime_exact} from \"../controller/utils\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport StatusIcon from \"../Component/StatusIcon/StatusIcon\";\n\nexport function Tasks(props) {\n    const [tasks, setTasks] = React.useState();\n    const uid = useSelector(state => state.user.uid);\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid + \"/tasks\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>任务</Typography>\n        <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n            {tasks &&\n            <MaterialTable icons={tableIcons} columns={[\n                {title: \"漫画\", field: \"mname\"},\n                {title: \"章节\", field: \"cname\"},\n                {title: \"任务\", field: \"name\"},\n                {title: \"类型\", field: \"type\", lookup: {\n                        0: \"其他\",\n                        1: \"图源\",\n                        2: \"翻译\",\n                        3: \"校对\",\n                        4: \"嵌字\",\n                        5: \"审核\",\n                        6: \"发布\",\n                    }},\n                {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"])},\n                {title: \"状态\", field: \"status\", render: task => <StatusIcon status={task[\"status\"]}/>, defaultSort: \"asc\"}\n            ]} options={{\n                pageSize: 20,\n            }} data={tasks} components={{\n                Toolbar: props => (<></>)\n            }} onRowClick={(event, rowData, togglePanel) => {\n                history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n            }} localization={{\n                grouping: {\n                    placeholder: \"拖拽表头至此以聚合显示...\",\n                    groupedBy: \"聚合:\"\n                },\n                pagination: {\n                    labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                    labelRowsSelect: '行',\n                    labelRowsPerPage: '每页行数:',\n                    firstAriaLabel: '首页',\n                    firstTooltip: '首页',\n                    previousAriaLabel: '上一页',\n                    previousTooltip: '上一页',\n                    nextAriaLabel: '下一页',\n                    nextTooltip: '下一页',\n                    lastAriaLabel: '末页',\n                    lastTooltip: '末页'\n                },\n            }}/>}\n        </Box>\n    </>\n}","import React from \"react\";\nimport {Form} from \"react-final-form\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport {TextField} from \"mui-rff\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {setBusy, setSnackbar} from \"../../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../../constant\";\nimport {tokenHeader} from \"../../controller/user\";\nimport {useDispatch} from \"react-redux\";\n\nexport default function ChangePasswordButton(props) {\n    const {uid} = props;\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onChangePassword = (values) => {\n        console.log(values);\n        if (values[\"password\"] !== values[\"re-password\"]) {\n            dispatch(setSnackbar(\"两次密码不一致\", \"error\"));\n            return;\n        }\n        dispatch(setBusy(true));\n        axios.post(API_USER + \"/\" + uid + \"/password\", values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setOpen(false);\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (<>\n        <Button variant=\"contained\" color=\"secondary\" style={{marginTop: \"0.5rem\"}} onClick={handleClickOpen}>修改密码</Button>\n        <Dialog open={open} onClose={handleClose}>\n            <Form onSubmit={onChangePassword} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogTitle id=\"form-dialog-title\">修改密码</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            密码是6-32位字母、数字、空格或如下特殊字符的组合。-+_!=@#$%^&*?([)].;:\n                        </DialogContentText>\n                        <TextField autoFocus margin=\"dense\" name=\"password\" label=\"新密码\" type=\"password\" fullWidth required/>\n                        <TextField margin=\"dense\" name=\"re-password\" label=\"重复新密码\" type=\"password\" fullWidth required/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            修改\n                        </Button>\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>);\n}","import {useDispatch, useSelector} from \"react-redux\";\nimport React, {useEffect} from \"react\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport {Form} from \"react-final-form\";\nimport Box from \"@material-ui/core/Box\";\nimport {TextField} from \"mui-rff\";\nimport ChangePasswordButton from \"../Component/ChangePasswordButton/ChangePasswordButton\";\nimport Button from \"@material-ui/core/Button\";\n\nexport function Settings(props) {\n    const uid = useSelector(state => state.user.uid);\n    const [user, setUser] = React.useState();\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUser(res);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    const onSubmit = (values) => {\n        values[\"introduction\"] = values[\"introduction\"] || \"\";\n        console.log(values);\n        dispatch(setBusy(true));\n        axios.post(API_USER + \"/\" + uid, values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>账户设置</Typography>\n        <Form initialValues={user && {uid: user[\"uid\"], nickname: user[\"nickname\"], introduction: user[\"introduction\"]}}\n              onSubmit={onSubmit} render={({handleSubmit}) => (\n            <form onSubmit={handleSubmit}>\n                <Box display=\"flex\" flexDirection=\"column\" alignItems=\"flex-start\">\n                    <TextField name=\"uid\" label=\"用户ID\" disabled required/>\n                    <TextField name=\"nickname\" label=\"昵称\" required/>\n                    <TextField name=\"introduction\" label=\"自我介绍\" multiline rowsMax={5}/>\n                    <ChangePasswordButton uid={uid}/>\n                    <Button type=\"submit\" variant=\"contained\" color=\"primary\" style={{marginTop: \"1rem\"}}>保存</Button>\n                </Box>\n            </form>)}/>\n\n    </>\n}","import React from \"react\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {setBroadcast, setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Box from \"@material-ui/core/Box\";\nimport {CopyToClipboard} from \"react-copy-to-clipboard\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport ClipboardText from \"mdi-material-ui/ClipboardText\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport {Form} from \"react-final-form\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport {TextField} from \"mui-rff\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\n\nexport function Admin(props) {\n    const [codes, setCodes] = React.useState();\n    const dispatch = useDispatch();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/profile/i_code\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setCodes(res[\"icodes\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取邀请码列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    const handleAdd = () => {\n        axios.put(API_BASE + \"/profile/i_code\", null, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            let new_codes = codes.slice(0);\n            new_codes.push(res);\n            setCodes(Object.assign(new_codes));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        })\n    };\n\n    return <>\n        <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>管理</Typography>\n        <Box display=\"flex\" flexDirection=\"column\">\n            <Box><EditBroadcast style={{marginBottom: \"1rem\"}}/></Box>\n            <Box>\n                <Button variant=\"contained\" color=\"primary\" onClick={handleAdd}>添加邀请码</Button>\n                {codes && codes.map((code, key) =>\n                    <Paper style={{width: \"100%\"}} key={key}>\n                        <Box display=\"flex\" flexDirection=\"row\" alignItems=\"center\">\n                            <CopyToClipboard text={\"https://mikan.mom/signup?icode=\" + code[\"icode\"]} onCopy={() => {\n                                dispatch(setSnackbar(\"已复制邀请链接\", \"success\"))\n                            }}>\n                                <IconButton><ClipboardText/></IconButton>\n                            </CopyToClipboard>\n                            <Typography variant=\"body1\" noWrap flexGrow={1}>{code[\"icode\"]}</Typography>\n                        </Box>\n                    </Paper>\n                )}\n            </Box>\n        </Box>\n    </>\n}\n\nfunction EditBroadcast(props) {\n    const [open, setOpen] = React.useState(false);\n    const dispatch = useDispatch();\n    const broadcast = useSelector(state => state.site.broadcast);\n\n    const handleClickOpen = () => {\n        setOpen(true);\n    };\n\n    const handleClose = () => {\n        setOpen(false);\n    };\n\n    const onChangePassword = (values) => {\n        if (!values[\"broadcast\"]) values[\"broadcast\"] = \"\";\n        console.log(values);\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/env\", null, {\n            params: {\n                key: \"broadcast\",\n                value: values[\"broadcast\"]\n            },\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            setOpen(false);\n            dispatch(setBroadcast(values[\"broadcast\"]));\n            dispatch(setSnackbar(\"修改成功\", \"success\"));\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (<>\n        <Button variant=\"contained\" color=\"primary\" style={{marginTop: \"0.5rem\"}}\n                onClick={handleClickOpen} {...props}>修改公告</Button>\n        <Dialog open={open} onClose={handleClose} maxWidth=\"md\">\n            <Form onSubmit={onChangePassword} initialValues={{broadcast: broadcast}} render={({handleSubmit}) => (\n                <form onSubmit={handleSubmit}>\n                    <DialogTitle id=\"form-dialog-title\">修改公告</DialogTitle>\n                    <DialogContent>\n                        <TextField autoFocus margin=\"dense\" name=\"broadcast\" label=\"公告\" fullWidth multiline\n                                   rowsMax={5}/>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={handleClose} color=\"primary\">\n                            取消\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\">\n                            保存\n                        </Button>\n                    </DialogActions>\n                </form>)}/>\n        </Dialog>\n    </>);\n}","import React, {useEffect} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles, useTheme} from \"@material-ui/core/styles\";\n\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {CLEAN_USER} from \"../reducers/user\";\nimport {useHistory} from \"react-router\";\nimport {setTitle} from \"../controller/utils\";\nimport useMediaQuery from \"@material-ui/core/useMediaQuery\";\nimport {Tasks} from \"./TasksBlock\";\nimport {Settings} from \"./SettingsBlock\";\nimport {Admin} from \"./AdminBlock\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n}));\n\nexport default function DashboardPage(props) {\n    const classes = useStyles();\n    const [value, setValue] = React.useState(0);\n    const username = useSelector(state => state.user.nickname);\n    const privilege = useSelector(state => state.user.privilege);\n    const theme = useTheme();\n    const isDesktop = useMediaQuery(theme.breakpoints.up(\"md\"));\n    const dispatch = useDispatch();\n    const history = useHistory();\n\n    useEffect(() => setTitle(username), []);\n\n    const onLogOut = () => {\n        window.localStorage.removeItem(\"access_token\");\n        dispatch({type: CLEAN_USER});\n        history.push(\"/\");\n    };\n\n    const handleChange = (event, newValue) => {\n        setValue(newValue);\n    };\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1} alignItems=\"flex-end\">\n                    <Typography variant=\"h5\">欢迎您,</Typography>\n                    <Typography variant=\"h2\">{username}</Typography>\n                </Box>\n                <Box><Button onClick={onLogOut}>登出</Button></Box>\n            </Box>\n\n            <Box display=\"flex\" flexGrow={1} alignItems=\"flex-start\" flexDirection={isDesktop ? \"row\" : \"column\"}>\n                <Tabs\n                    orientation={isDesktop ? \"vertical\" : \"horizontal\"}\n                    variant=\"scrollable\"\n                    value={value}\n                    onChange={handleChange}\n                    className={classes.tabs}\n                >\n                    <Tab label=\"任务\"/>\n                    <Tab label=\"设置\"/>\n                    {privilege > 2 && <Tab label=\"管理\"/>}\n                </Tabs>\n                <TabPanel value={value} index={0}>\n                    <Tasks/>\n                </TabPanel>\n                <TabPanel value={value} index={1}>\n                    <Settings/>\n                </TabPanel>\n                <TabPanel value={value} index={2}>\n                    <Admin/>\n                </TabPanel>\n            </Box>\n        </Container>\n    );\n}\n\nfunction TabPanel(props) {\n    const {children, value, index, ...other} = props;\n\n    return (\n        <div style={{width: \"100%\"}} hidden={value !== index} {...other}>\n            {value === index && (\n                <Box p={3}>\n                    {children}\n                </Box>\n            )}\n        </div>\n    );\n}\n","import { useSnackbar } from 'notistack';\nimport React from 'react';\nimport {useSelector} from \"react-redux\";\nimport Button from \"@material-ui/core/Button\";\n\nexport default function Snackbar(props) {\n    const { enqueueSnackbar, closeSnackbar } = useSnackbar();\n    const errorMsg = useSelector(state => state.site.snackMsg);\n\n    const omitAction = (key) => () => closeSnackbar(key);\n\n    React.useEffect(() => {\n        if (typeof errorMsg === \"object\" &&\n            typeof errorMsg.message === \"string\" &&\n            errorMsg.message !== \"\") {\n            const messageProps = {variant: errorMsg.variant};\n            if (errorMsg.dismissable)\n                Object.assign(messageProps, {\n                action: (key) => (\n                <Button onClick={omitAction(key)}>\n                    忽略\n                </Button>\n            )});\n            enqueueSnackbar(errorMsg.message, messageProps);\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [errorMsg]);\n\n    return (<div/>);\n}","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport axios from \"axios\";\nimport {useLocation} from \"react-router\";\nimport {API_THIRD_PARTY} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\nimport {setTitle} from \"../controller/utils\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n}));\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nexport default function OAuthPage(props) {\n    const classes = useStyles();\n    const [fail, setFail] = useState(false);\n    const query = useQuery();\n\n    React.useEffect(() => {\n        setTitle(\"授权\");\n        axios.get(API_THIRD_PARTY + \"/auth_code\", {\n            params: {\n                client_id: query.get(\"client_id\")\n            },\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data)\n            .then(res => {\n                let auth_code = res[\"access_token\"];\n                window.location.href = query.get(\"redirect_uri\") + \"?code=\" + auth_code + \"&state=\" + query.get(\"state\");\n            }).catch(() => setFail(true))\n    }, []);\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">{fail ? \"请重试\" : \"登录到\" + query.get(\"client_id\")}</Typography>\n                    <Typography variant=\"h2\">{fail ? \"授权失败\" : \"正在授权...\"}</Typography>\n                </Box>\n            </Box>\n        </Container>\n    );\n}","import React from 'react';\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {CLOUD_URL} from \"../constant\";\n\nexport default function CloudPage() {\n\n    React.useEffect(() => {\n        window.location.href = CLOUD_URL;\n    }, []);\n\n    return (<Container>\n        <Typography variant={\"h3\"}>正在跳转...</Typography>\n        <Typography variant={\"h5\"}>如无跳转, <a href={CLOUD_URL}>请点击这里。</a></Typography>\n    </Container>);\n}\n","import React from \"react\";\nimport MaterialTable from \"material-table\";\nimport {useHistory} from \"react-router\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\n\nexport default function UsersTable(props) {\n    const history = useHistory();\n    const {users} = props;\n\n    return (\n        <MaterialTable icons={tableIcons} columns={[\n            {title: \"昵称\", field: \"nickname\"},\n            {title: \"用户ID\", field: \"uid\"},\n        ]} options={{\n            pageSize: 20\n        }} data={users} components={{\n            Toolbar: props => (<></>)\n        }} onRowClick={(event, rowData, togglePanel) => {\n            history.push(\"/user/\" + rowData[\"uid\"]);\n        }} localization={{\n            grouping: {\n                placeholder: \"拖拽表头至此以聚合显示...\",\n                groupedBy: \"聚合:\"\n            },\n            pagination: {\n                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                labelRowsSelect: '行',\n                labelRowsPerPage: '每页行数:',\n                firstAriaLabel: '首页',\n                firstTooltip: '首页',\n                previousAriaLabel: '上一页',\n                previousTooltip: '上一页',\n                nextAriaLabel: '下一页',\n                nextTooltip: '下一页',\n                lastAriaLabel: '末页',\n                lastTooltip: '末页'\n            },\n        }}/>\n        );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport {setTitle} from \"../controller/utils\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {useDispatch} from \"react-redux\";\nimport {Box} from \"@material-ui/core\";\nimport UsersTable from \"./UsersTable\";\n\nconst useStyles = makeStyles((theme) => ({\n    title: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n}));\n\nexport default function PeoplePage() {\n    const classes = useStyles();\n    const [users, setUsers] = useState([]);\n    const dispatch = useDispatch();\n\n    useEffect(() => {\n        setTitle(\"组员\");\n        dispatch(setBusy(true));\n        axios.get(API_USER, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUsers(res[\"users\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取组员列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n\n    return (\n        <Container>\n            <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                <div className={classes.title}>\n                    <Typography variant=\"h2\">组员</Typography>\n                </div>\n                <UsersTable users={users}/>\n            </Box>\n        </Container>\n    );\n}","import React, {useEffect, useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport {makeStyles} from \"@material-ui/core/styles\";\n\nimport {localtime_exact, setTitle} from \"../controller/utils\";\nimport {useDispatch} from \"react-redux\";\nimport ExpansionPanel from \"@material-ui/core/ExpansionPanel\";\nimport ExpansionPanelSummary from \"@material-ui/core/ExpansionPanelSummary\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\nimport ExpansionPanelDetails from \"@material-ui/core/ExpansionPanelDetails\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ExpansionPanelActions from \"@material-ui/core/ExpansionPanelActions\";\nimport UserChip from \"../Component/UserChip/UserChip\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {setNotifications, tokenHeader} from \"../controller/user\";\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(5),\n    },\n    root: {\n        width: '100%'\n    },\n    rootExpanded: {\n        width: '100%',\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(1),\n    },\n    details: {\n        alignItems: 'center',\n    },\n    summary: {\n        width: '100%',\n    },\n    heading: {\n        fontSize: theme.typography.pxToRem(15),\n    },\n    userChip: {\n        marginRight: theme.spacing(1),\n    },\n    unreadHeading: {\n        fontSize: theme.typography.pxToRem(15),\n        fontWeight: \"bold\",\n    }\n}));\n\nexport default function MessagePage(props) {\n    const classes = useStyles();\n    const [messages, setMessages] = useState();\n    const [expanded, setExpanded] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const deleteFromList = (mrn) => {\n        let result = [];\n        for (let message of messages) {\n            message[\"mrn\"] !== mrn && result.push(message);\n        }\n        setMessages(result);\n    };\n\n    useEffect(() => {\n        setTitle(\"通知\");\n        dispatch(setBusy(true));\n        axios.get(API_BASE + \"/profile/inbox\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    typeof res[\"messages\"] === \"object\" && setMessages(res[\"messages\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取列表失败, 请刷新重试\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n\n    return (\n        <Container>\n            <Box display={\"flex\"} className={classes.titleArea} flexDirection=\"column\">\n                <Box flexGrow={1}>\n                    <Typography variant=\"h2\">我的通知</Typography>\n                </Box>\n                <Box display={\"flex\"} flexWrap={\"wrap\"}\n                     justifyContent={\"center\"} alignItems={\"center\"} flexDirection=\"column\">\n                    {messages && messages.map((message) => (\n                        <MessageItem message={message} expanded={expanded} setExpanded={setExpanded}\n                                     deleteFromList={deleteFromList} key={message[\"mrn\"]}/>\n                    ))}\n                </Box>\n            </Box>\n        </Container>\n    );\n}\n\nfunction MessageItem(props) {\n    const classes = useStyles();\n    const {message, expanded, setExpanded, deleteFromList} = props;\n    const [unread, setUnread] = useState(false);\n    const dispatch = useDispatch();\n\n    const [body, setBody] = useState();\n\n    const handleDelete = () => {\n        dispatch(setBusy(true));\n        axios.delete(API_BASE + \"/message/\" + message[\"mrn\"], {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        }).then(res => {\n                deleteFromList(message[\"mrn\"]);\n            }\n        ).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    React.useEffect(() => setUnread(message[\"unread\"]), []);\n\n    React.useEffect(() => {\n        if (expanded === message[\"mrn\"] && !body) {\n            dispatch(setBusy(true));\n            axios.get(API_BASE + \"/message/\" + message[\"mrn\"], {\n                headers: tokenHeader(),\n                withCredentials: true,\n                validateStatus: status => status === 200\n            })\n                .then(res => res.data)\n                .then(res => {\n                        typeof res[\"body\"] === \"string\" && setBody(res[\"body\"]);\n                        if (unread) {\n                            setUnread(false);\n                            dispatch(setNotifications(-1));\n                        }\n                    }\n                ).catch(err => {\n                dispatch(setSnackbar(\"获取消息失败, 请刷新重试\", \"error\"));\n            }).finally(() => dispatch(setBusy(false)));\n        }\n    }, [expanded]);\n\n    const handleExpand = () => {\n        if (expanded === message[\"mrn\"]) setExpanded(\"\");\n        else setExpanded(message[\"mrn\"]);\n    };\n\n    return <div className={expanded === message[\"mrn\"] ? classes.rootExpanded : classes.root}>\n        <ExpansionPanel TransitionProps={{unmountOnExit: true}} expanded={expanded === message[\"mrn\"]}\n                        onChange={handleExpand}>\n            <ExpansionPanelSummary expandIcon={<ExpandMoreIcon/>} aria-controls=\"message-summary\">\n                <Box display=\"flex\" alignItems={\"center\"} flexDirection=\"row\" className={classes.summary}>\n                    <UserChip user={message[\"from_by\"]} className={classes.userChip}/>\n                    <Box flexGrow={1}>\n                        <Typography className={unread ? classes.unreadHeading : classes.heading}\n                                    noWrap>{message[\"title\"]}</Typography>\n                    </Box>\n                    <Typography>{localtime_exact(message[\"create_on\"])}</Typography>\n                </Box>\n            </ExpansionPanelSummary>\n            <ExpansionPanelDetails className={classes.details}>\n                <Typography variant=\"body1\">{body}</Typography>\n            </ExpansionPanelDetails>\n            <Divider/>\n            <ExpansionPanelActions>\n                <Button onClick={handleDelete} color=\"secondary\" variant=\"outlined\" size=\"small\">删除消息</Button>\n            </ExpansionPanelActions>\n        </ExpansionPanel>\n    </div>\n}","import React, {useState} from \"react\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport Grid from \"@material-ui/core/Grid\";\nimport {makeStyles} from \"@material-ui/core/styles\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from '@material-ui/core/Card';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport {useParams, Link as RouterLink, useHistory} from \"react-router-dom\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport axios from \"axios\";\nimport {API_USER} from \"../constant\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport {useDispatch, useSelector} from \"react-redux\";\nimport {localtime, localtime_exact, setTitle} from \"../controller/utils\";\nimport Link from \"@material-ui/core/Link\";\nimport {tokenHeader} from \"../controller/user\";\nimport ChangePasswordButton from \"../Component/ChangePasswordButton/ChangePasswordButton\";\nimport {tableIcons} from \"../Component/MaterialTable/tableIcons\";\nimport StatusIcon from \"../Component/StatusIcon/StatusIcon\";\nimport MaterialTable from \"material-table\";\n\n\nconst useStyles = makeStyles((theme) => ({\n    titleArea: {\n        marginTop: theme.spacing(5),\n        marginBottom: theme.spacing(1),\n    },\n    coverCard: {\n        maxWidth: 275,\n        position: \"relative\"\n    },\n    label: {\n        marginTop: theme.spacing(0.5),\n        marginRight: theme.spacing(0.5)\n    }\n}));\n\nexport default function UserPage(props) {\n    const classes = useStyles();\n    const {uid} = useParams();\n    const dispatch = useDispatch();\n    const history = useHistory();\n    const privilege = useSelector(state => state.user.privilege);\n\n    const [user, setUser] = useState({});\n    const [tasks, setTasks] = useState();\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid, {\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setUser(res);\n                    setTitle(res.nickname);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"获取用户信息失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, []);\n\n    React.useEffect(() => {\n        dispatch(setBusy(true));\n        axios.get(API_USER + \"/\" + uid + \"/tasks\", {\n            headers: tokenHeader(),\n            withCredentials: true,\n            validateStatus: status => status === 200\n        })\n            .then(res => res.data)\n            .then(res => {\n                    setTasks(res[\"tasks\"]);\n                }\n            ).catch(err => {\n            dispatch(setSnackbar(\"拉取任务列表失败\", \"error\"));\n        }).finally(() => dispatch(setBusy(false)));\n    }, []);\n\n    return (\n        <Container maxWidth={\"lg\"}>\n            <Box display={\"flex\"} alignItems={\"flex-end\"} className={classes.titleArea}>\n                <Box flexGrow={1}>\n                    <Typography variant=\"h5\">\n                        @{user[\"uid\"] || <Skeleton/>}\n                    </Typography>\n                    <Typography variant=\"h2\">\n                        {<Link component={RouterLink} to={\"/user/\" + uid}\n                               color=\"inherit\">{user[\"nickname\"]}</Link> || <Skeleton/>}\n                    </Typography>\n                </Box>\n                <Box>{privilege > 2 && <ChangePasswordButton uid={user[\"uid\"]}/>}</Box>\n            </Box>\n            <Grid container spacing={2}>\n                <Grid item xs={12} md={3}>\n                    <Box display={\"flex\"} p={1} justifyContent=\"center\" flexDirection={\"column\"} alignItems=\"center\">\n                        {user && user[\"avatar\"] !== \"\" && <Card className={classes.coverCard}>\n                            <CardMedia\n                                component={\"img\"}\n                                image={user[\"avatar\"]}\n                                title={user[\"nickname\"]}\n                            />\n                        </Card>}\n                        <Box display=\"flex\" flexDirection={\"column\"} style={{ width: '100%' }}>\n\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>加入时间</Typography></Box>\n                                <Box>{user && localtime(user[\"join_time\"])}</Box>\n                            </Box>\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>最后一次活跃</Typography></Box>\n                                <Box>{user && localtime(user[\"goo_timestamp\"])}</Box>\n                            </Box>\n                            <Box display=\"flex\" flexDirection={\"row\"}>\n                                <Box flexGrow={1}><Typography>权限</Typography></Box>\n                                <Box>{user && user[\"privilege\"]}</Box>\n                            </Box>\n                            <Box>\n                                <Typography paragraph>{user && user[\"introduction\"]}</Typography>\n                            </Box>\n                        </Box>\n                    </Box>\n                </Grid>\n                <Grid item xs={12} md={9}>\n                    <Typography variant=\"h5\" style={{marginBottom: \"2rem\"}}>任务</Typography>\n                    <Box display=\"flex\" style={{width: \"100%\"}} flexDirection=\"column\">\n                        {tasks &&\n                        <MaterialTable icons={tableIcons} columns={[\n                            {title: \"漫画\", field: \"mname\"},\n                            {title: \"章节\", field: \"cname\"},\n                            {title: \"任务\", field: \"name\"},\n                            {title: \"类型\", field: \"type\", lookup: {\n                                    0: \"其他\",\n                                    1: \"图源\",\n                                    2: \"翻译\",\n                                    3: \"校对\",\n                                    4: \"嵌字\",\n                                    5: \"审核\",\n                                    6: \"发布\",\n                                }},\n                            {title: \"上一次活跃\", field: \"last_update\", render: task => localtime_exact(task[\"last_update\"])},\n                            {title: \"状态\", field: \"status\", render: task => <StatusIcon status={task[\"status\"]}/>, defaultSort: \"asc\"}\n                        ]} options={{\n                            pageSize: 20,\n                        }} data={tasks} components={{\n                            Toolbar: props => (<></>)\n                        }} onRowClick={(event, rowData, togglePanel) => {\n                            history.push(\"/manga/\" + rowData[\"mid\"] + \"/\" + rowData[\"cid\"] + \"/\" + rowData[\"id\"]);\n                        }} localization={{\n                            grouping: {\n                                placeholder: \"拖拽表头至此以聚合显示...\",\n                                groupedBy: \"聚合:\"\n                            },\n                            pagination: {\n                                labelDisplayedRows: '第{from}到{to}行 共 {count}行',\n                                labelRowsSelect: '行',\n                                labelRowsPerPage: '每页行数:',\n                                firstAriaLabel: '首页',\n                                firstTooltip: '首页',\n                                previousAriaLabel: '上一页',\n                                previousTooltip: '上一页',\n                                nextAriaLabel: '下一页',\n                                nextTooltip: '下一页',\n                                lastAriaLabel: '末页',\n                                lastTooltip: '末页'\n                            },\n                        }}/>}\n                    </Box>\n                </Grid>\n            </Grid>\n        </Container>\n    );\n}\n","import React, {useEffect} from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport Container from '@material-ui/core/Container';\nimport {useHistory} from \"react-router-dom\";\nimport {setTitle} from \"./controller/utils\";\nimport GoogleDownasaur from \"mdi-material-ui/GoogleDownasaur\"\n\nexport default function NotFound() {\n    let history = useHistory();\n\n    useEffect(() => setTitle(\"404\"), []);\n\n    useEffect(() => {\n        setTimeout(redirect, 3000);\n    });\n\n    const redirect = () => history.push(\"\");\n\n    return (\n        <Container component=\"main\">\n\n            <Typography variant=\"h1\"><GoogleDownasaur style={{fontSize: 90}}/>404什么也没有找到</Typography>\n        </Container>\n    );\n}","import React, {useEffect} from 'react';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport {TextField} from \"mui-rff\";\nimport Typography from '@material-ui/core/Typography';\nimport {makeStyles} from '@material-ui/core/styles';\nimport Container from '@material-ui/core/Container';\nimport Leaf from \"mdi-material-ui/Leaf\";\nimport {useDispatch} from \"react-redux\";\nimport {useHistory, useLocation} from \"react-router-dom\";\nimport {setTitle} from \"../controller/utils\";\nimport {Form} from \"react-final-form\";\nimport {setBusy, setSnackbar} from \"../controller/site\";\nimport axios from \"axios\";\nimport {API_BASE} from \"../constant\";\nimport {tokenHeader} from \"../controller/user\";\n\nconst useStyles = makeStyles((theme) => ({\n    paper: {\n        marginTop: theme.spacing(8),\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n    },\n    avatar: {\n        margin: theme.spacing(1),\n        backgroundColor: theme.palette.secondary.main,\n    },\n    form: {\n        width: '100%', // Fix IE 11 issue.\n        marginTop: theme.spacing(1),\n    },\n    submit: {\n        margin: theme.spacing(3, 0, 2),\n    },\n}));\n\nfunction useQuery() {\n    return new URLSearchParams(useLocation().search);\n}\n\nexport default function SignUpPage() {\n    const classes = useStyles();\n    let query = useQuery();\n    const dispatch = useDispatch();\n    let history = useHistory();\n\n    useEffect(() => setTitle(\"注册\"), []);\n\n    let onSubmit = (values) => {\n        values[\"icode\"] = query.get(\"icode\");\n        console.log(values);\n        if (values[\"password\"] !== values[\"re-password\"]) {\n            dispatch(setSnackbar(\"两次密码不一致\", \"error\"));\n            return;\n        }\n        dispatch(setBusy(true));\n        axios.post(API_BASE + \"/signup\", values, {\n            headers: tokenHeader(),\n            validateStatus: status => status === 200\n        }).then(res => res.data).then(res => {\n            dispatch(setSnackbar(\"注册成功，请登录。\", \"success\"));\n            history.push(\"/\");\n        }).catch(err => {\n            try {\n                console.log(err.response.data.detail);\n                dispatch(setSnackbar(err.response.data.detail, \"error\"));\n            } catch (e) {\n                dispatch(setSnackbar(\"未知的错误\", \"error\"));\n            }\n        }).finally(() => dispatch(setBusy(false)));\n    };\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\">\n            <CssBaseline/>\n            <div className={classes.paper}>\n                <Avatar className={classes.avatar}>\n                    <Leaf/>\n                </Avatar>\n                <Typography component=\"h1\" variant=\"h5\">\n                    欢迎加入汉化工房九九组\n                </Typography>\n                <Form onSubmit={onSubmit} render={({handleSubmit}) => (\n                    <form onSubmit={handleSubmit}>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth label=\"用户ID\" name=\"uid\"\n                                   autoComplete=\"uid\" autoFocus helperText=\"ID将被用于登录\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth label=\"昵称\" name=\"nickname\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"password\" label=\"密码\"\n                                   type=\"password\" autoComplete=\"current-password\" helperText=\"密码是6-32位字母、数字、空格或如下特殊字符的组合。-+_!=@#$%^&*?([)].;:\"/>\n                        <TextField variant=\"outlined\" margin=\"normal\" required fullWidth name=\"re-password\" label=\"重复密码\"\n                                   type=\"password\"/>\n                        <Button fullWidth variant=\"contained\" color=\"primary\" type=\"submit\">\n                            注册\n                        </Button>\n                    </form>)}/>\n            </div>\n        </Container>\n    );\n}","import React from 'react';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route\n} from \"react-router-dom\";\n\nimport Border from \"./Border/Border\";\nimport MainPage from \"./MainPage/MainPage\";\nimport TasksPage from \"./TasksPage/TasksPage\";\nimport LoginPage from \"./LoginPage/LoginPage\";\nimport MangaPage from \"./MangaPage/MangaPage\";\nimport PrivateRoute from \"./PrivateRoute\";\nimport DashboardPage from \"./DashboardPage/DashboardPage\";\nimport Snackbar from \"./Snackbar\";\nimport OAuthPage from \"./OAuthPage/OAuthPage\";\nimport CloudPage from \"./CloudPage/CloudPage\";\nimport PeoplePage from \"./PeoplePage/PeoplePage\";\nimport MessagePage from \"./MessagePage/MessagePage\";\nimport UserPage from \"./UserPage/UserPage\";\nimport NotFound from \"./NotFound\";\nimport SignUpPage from \"./LoginPage/SignUpPage\";\n\nexport default function Routes() {\n\n    return (\n        <Router>\n            <Border>\n                <Switch>\n                    <Route exact path={\"/\"}>\n                        <MainPage/>\n                    </Route>\n                    <Route path={\"/tasks\"}>\n                        <TasksPage/>\n                    </Route>\n                    <Route path={\"/login\"}>\n                        <LoginPage/>\n                    </Route>\n                    <Route path={\"/signup\"}>\n                        <SignUpPage/>\n                    </Route>\n                    <PrivateRoute path={\"/me\"}>\n                        <DashboardPage/>\n                    </PrivateRoute>\n                    <Route path={\"/cloud\"}>\n                        <CloudPage/>\n                    </Route>\n                    <PrivateRoute path={\"/oauth2\"}>\n                        <OAuthPage/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/users\"}>\n                        <PeoplePage/>\n                    </PrivateRoute>\n                    <PrivateRoute path={\"/message\"}>\n                        <MessagePage/>\n                    </PrivateRoute>\n                    <Route path={\"/manga/:mid\"} children={<MangaPage/>} />\n                    <PrivateRoute path={\"/user/:uid\"} children={<UserPage/>} />\n                    <Route path=\"*\">\n                        <NotFound/>\n                    </Route>\n                </Switch>\n            </Border>\n            <Snackbar/>\n        </Router>\n    );\n}","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. Border is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import { combineReducers } from 'redux'\nimport site from './site'\nimport user from './user'\n\nconst mikanPeel = combineReducers({\n    site,\n    user,\n});\n\nexport default mikanPeel","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport {ThemeProvider} from '@material-ui/core/styles';\nimport {responsiveMainThem} from './theme'\nimport Routes from \"./Routes\"\nimport * as serviceWorker from './serviceWorker';\nimport {Provider} from 'react-redux'\nimport {createStore, applyMiddleware} from 'redux'\nimport mikanPeel from './reducers'\n\nimport thunk from \"redux-thunk\";\nimport {SnackbarProvider} from \"notistack\";\n\nlet store = createStore(mikanPeel, applyMiddleware(thunk));\n\nReactDOM.render(\n    <Provider store={store}>\n        <ThemeProvider theme={responsiveMainThem}>\n            <SnackbarProvider anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'right',\n            }}>\n                <Routes/>\n            </SnackbarProvider>\n        </ThemeProvider>\n    </Provider>,\n    document.getElementById('root')\n);\n\nserviceWorker.register();\n"],"sourceRoot":""}